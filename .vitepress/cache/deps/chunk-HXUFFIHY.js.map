{
  "version": 3,
  "sources": ["../../../node_modules/@orama/wc-components/node_modules/.pnpm/@orama+orama@3.0.1/node_modules/@orama/orama/dist/esm/components/tokenizer/languages.js", "../../../node_modules/@orama/wc-components/node_modules/.pnpm/@orama+orama@3.0.1/node_modules/@orama/orama/dist/esm/utils.js", "../../../node_modules/@orama/wc-components/node_modules/.pnpm/@orama+orama@3.0.1/node_modules/@orama/orama/dist/esm/errors.js", "../../../node_modules/@orama/wc-components/node_modules/.pnpm/@orama+orama@3.0.1/node_modules/@orama/orama/dist/esm/components/internal-document-id-store.js", "../../../node_modules/@orama/wc-components/node_modules/.pnpm/@orama+orama@3.0.1/node_modules/@orama/orama/dist/esm/components/hooks.js", "../../../node_modules/@orama/wc-components/node_modules/.pnpm/@orama+orama@3.0.1/node_modules/@orama/orama/dist/esm/trees/vector.js", "../../../node_modules/@orama/wc-components/node_modules/.pnpm/@orama+orama@3.0.1/node_modules/@orama/orama/dist/esm/methods/docs.js", "../../../node_modules/@orama/wc-components/node_modules/.pnpm/@orama+orama@3.0.1/node_modules/@orama/orama/dist/esm/constants.js", "../../../node_modules/@orama/wc-components/node_modules/.pnpm/@orama+orama@3.0.1/node_modules/@orama/orama/dist/esm/components/facets.js", "../../../node_modules/@orama/wc-components/node_modules/.pnpm/@orama+orama@3.0.1/node_modules/@orama/orama/dist/esm/components/groups.js", "../../../node_modules/@orama/wc-components/node_modules/.pnpm/@orama+orama@3.0.1/node_modules/@orama/orama/dist/esm/methods/search-fulltext.js", "../../../node_modules/@orama/wc-components/node_modules/.pnpm/@orama+orama@3.0.1/node_modules/@orama/orama/dist/esm/methods/search-vector.js", "../../../node_modules/@orama/wc-components/node_modules/.pnpm/@orama+orama@3.0.1/node_modules/@orama/orama/dist/esm/methods/search-hybrid.js", "../../../node_modules/@orama/wc-components/node_modules/.pnpm/@orama+orama@3.0.1/node_modules/@orama/orama/dist/esm/methods/search.js", "../../../node_modules/@orama/wc-components/node_modules/.pnpm/@orama+orama@3.0.1/node_modules/@orama/orama/dist/esm/methods/answer-session.js", "../../../node_modules/@orama/wc-components/node_modules/.pnpm/@orama+switch@3.0.2_@orama+orama@3.0.1_@oramacloud+client@2.1.4/node_modules/@orama/switch/dist/index.js", "../../../node_modules/@orama/wc-components/node_modules/.pnpm/@oramacloud+client@2.1.4/node_modules/@oramacloud/client/dist/index.js", "../../../node_modules/@orama/wc-components/dist/esm/src/utils/utils.ts"],
  "sourcesContent": ["export const STEMMERS = {\n    arabic: 'ar',\n    armenian: 'am',\n    bulgarian: 'bg',\n    danish: 'dk',\n    dutch: 'nl',\n    english: 'en',\n    finnish: 'fi',\n    french: 'fr',\n    german: 'de',\n    greek: 'gr',\n    hungarian: 'hu',\n    indian: 'in',\n    indonesian: 'id',\n    irish: 'ie',\n    italian: 'it',\n    lithuanian: 'lt',\n    nepali: 'np',\n    norwegian: 'no',\n    portuguese: 'pt',\n    romanian: 'ro',\n    russian: 'ru',\n    serbian: 'rs',\n    slovenian: 'ru',\n    spanish: 'es',\n    swedish: 'se',\n    tamil: 'ta',\n    turkish: 'tr',\n    ukrainian: 'uk',\n    sanskrit: 'sk'\n};\nexport const SPLITTERS = {\n    dutch: /[^A-Za-zàèéìòóù0-9_'-]+/gim,\n    english: /[^A-Za-zàèéìòóù0-9_'-]+/gim,\n    french: /[^a-z0-9äâàéèëêïîöôùüûœç-]+/gim,\n    italian: /[^A-Za-zàèéìòóù0-9_'-]+/gim,\n    norwegian: /[^a-z0-9_æøåÆØÅäÄöÖüÜ]+/gim,\n    portuguese: /[^a-z0-9à-úÀ-Ú]/gim,\n    russian: /[^a-z0-9а-яА-ЯёЁ]+/gim,\n    spanish: /[^a-z0-9A-Zá-úÁ-ÚñÑüÜ]+/gim,\n    swedish: /[^a-z0-9_åÅäÄöÖüÜ-]+/gim,\n    german: /[^a-z0-9A-ZäöüÄÖÜß]+/gim,\n    finnish: /[^a-z0-9äöÄÖ]+/gim,\n    danish: /[^a-z0-9æøåÆØÅ]+/gim,\n    hungarian: /[^a-z0-9áéíóöőúüűÁÉÍÓÖŐÚÜŰ]+/gim,\n    romanian: /[^a-z0-9ăâîșțĂÂÎȘȚ]+/gim,\n    serbian: /[^a-z0-9čćžšđČĆŽŠĐ]+/gim,\n    turkish: /[^a-z0-9çÇğĞıİöÖşŞüÜ]+/gim,\n    lithuanian: /[^a-z0-9ąčęėįšųūžĄČĘĖĮŠŲŪŽ]+/gim,\n    arabic: /[^a-z0-9أ-ي]+/gim,\n    nepali: /[^a-z0-9अ-ह]+/gim,\n    irish: /[^a-z0-9áéíóúÁÉÍÓÚ]+/gim,\n    indian: /[^a-z0-9अ-ह]+/gim,\n    armenian: /[^a-z0-9ա-ֆ]+/gim,\n    greek: /[^a-z0-9α-ωά-ώ]+/gim,\n    indonesian: /[^a-z0-9]+/gim,\n    ukrainian: /[^a-z0-9а-яА-ЯіїєІЇЄ]+/gim,\n    slovenian: /[^a-z0-9čžšČŽŠ]+/gim,\n    bulgarian: /[^a-z0-9а-яА-Я]+/gim,\n    tamil: /[^a-z0-9அ-ஹ]+/gim,\n    sanskrit: /[^a-z0-9A-Zāīūṛḷṃṁḥśṣṭḍṇṅñḻḹṝ]+/gim\n};\nexport const SUPPORTED_LANGUAGES = Object.keys(STEMMERS);\nexport function getLocale(language) {\n    return language !== undefined && SUPPORTED_LANGUAGES.includes(language) ? STEMMERS[language] : undefined;\n}\n//# sourceMappingURL=languages.js.map", "import { createError } from './errors.js';\nconst baseId = Date.now().toString().slice(5);\nlet lastId = 0;\nconst k = 1024;\nconst nano = BigInt(1e3);\nconst milli = BigInt(1e6);\nconst second = BigInt(1e9);\nexport const isServer = typeof window === 'undefined';\n/**\n * This value can be increased up to 100_000\n * But i don't know if this value change from nodejs to nodejs\n * So I will keep a safer value here.\n */\nexport const MAX_ARGUMENT_FOR_STACK = 65535;\n/**\n * This method is needed to used because of issues like: https://github.com/askorama/orama/issues/301\n * that issue is caused because the array that is pushed is huge (>100k)\n *\n * @example\n * ```ts\n * safeArrayPush(myArray, [1, 2])\n * ```\n */\nexport function safeArrayPush(arr, newArr) {\n    if (newArr.length < MAX_ARGUMENT_FOR_STACK) {\n        Array.prototype.push.apply(arr, newArr);\n    }\n    else {\n        const newArrLength = newArr.length;\n        for (let i = 0; i < newArrLength; i += MAX_ARGUMENT_FOR_STACK) {\n            Array.prototype.push.apply(arr, newArr.slice(i, i + MAX_ARGUMENT_FOR_STACK));\n        }\n    }\n}\nexport function sprintf(template, ...args) {\n    return template.replace(/%(?:(?<position>\\d+)\\$)?(?<width>-?\\d*\\.?\\d*)(?<type>[dfs])/g, function (...replaceArgs) {\n        const groups = replaceArgs[replaceArgs.length - 1];\n        const { width: rawWidth, type, position } = groups;\n        const replacement = position ? args[Number.parseInt(position) - 1] : args.shift();\n        const width = rawWidth === '' ? 0 : Number.parseInt(rawWidth);\n        switch (type) {\n            case 'd':\n                return replacement.toString().padStart(width, '0');\n            case 'f': {\n                let value = replacement;\n                const [padding, precision] = rawWidth.split('.').map((w) => Number.parseFloat(w));\n                if (typeof precision === 'number' && precision >= 0) {\n                    value = value.toFixed(precision);\n                }\n                return typeof padding === 'number' && padding >= 0 ? value.toString().padStart(width, '0') : value.toString();\n            }\n            case 's':\n                return width < 0\n                    ? replacement.toString().padEnd(-width, ' ')\n                    : replacement.toString().padStart(width, ' ');\n            default:\n                return replacement;\n        }\n    });\n}\nexport function formatBytes(bytes, decimals = 2) {\n    if (bytes === 0) {\n        return '0 Bytes';\n    }\n    const dm = decimals < 0 ? 0 : decimals;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return `${parseFloat((bytes / Math.pow(k, i)).toFixed(dm))} ${sizes[i]}`;\n}\nexport function isInsideWebWorker() {\n    // @ts-expect-error - WebWorker global scope\n    return typeof WorkerGlobalScope !== 'undefined' && self instanceof WorkerGlobalScope;\n}\nexport function isInsideNode() {\n    return typeof process !== 'undefined' && process.release && process.release.name === 'node';\n}\nexport function getNanosecondTimeViaPerformance() {\n    return BigInt(Math.floor(performance.now() * 1e6));\n}\nexport function formatNanoseconds(value) {\n    if (typeof value === 'number') {\n        value = BigInt(value);\n    }\n    if (value < nano) {\n        return `${value}ns`;\n    }\n    else if (value < milli) {\n        return `${value / nano}μs`;\n    }\n    else if (value < second) {\n        return `${value / milli}ms`;\n    }\n    return `${value / second}s`;\n}\nexport function getNanosecondsTime() {\n    if (isInsideWebWorker()) {\n        return getNanosecondTimeViaPerformance();\n    }\n    if (isInsideNode()) {\n        return process.hrtime.bigint();\n    }\n    if (typeof process !== 'undefined' && typeof process?.hrtime?.bigint === 'function') {\n        return process.hrtime.bigint();\n    }\n    if (typeof performance !== 'undefined') {\n        return getNanosecondTimeViaPerformance();\n    }\n    // @todo: fallback to V8 native method to get microtime\n    return BigInt(0);\n}\nexport function uniqueId() {\n    return `${baseId}-${lastId++}`;\n}\nexport function getOwnProperty(object, property) {\n    // Checks if `hasOwn` method is defined avoiding errors with older Node.js versions\n    if (Object.hasOwn === undefined) {\n        return Object.prototype.hasOwnProperty.call(object, property) ? object[property] : undefined;\n    }\n    return Object.hasOwn(object, property) ? object[property] : undefined;\n}\nexport function getTokenFrequency(token, tokens) {\n    let count = 0;\n    for (const t of tokens) {\n        if (t === token) {\n            count++;\n        }\n    }\n    return count;\n}\nexport function insertSortedValue(arr, el, compareFn = sortTokenScorePredicate) {\n    let low = 0;\n    let high = arr.length;\n    let mid;\n    while (low < high) {\n        mid = (low + high) >>> 1;\n        if (compareFn(el, arr[mid]) < 0) {\n            high = mid;\n        }\n        else {\n            low = mid + 1;\n        }\n    }\n    arr.splice(low, 0, el);\n    return arr;\n}\nexport function sortTokenScorePredicate(a, b) {\n    if (b[1] === a[1]) {\n        return a[0] - b[0];\n    }\n    return b[1] - a[1];\n}\n// Intersection function taken from https://github.com/lovasoa/fast_array_intersect.\n// MIT Licensed at the time of writing.\nexport function intersect(arrays) {\n    if (arrays.length === 0) {\n        return [];\n    }\n    else if (arrays.length === 1) {\n        return arrays[0];\n    }\n    for (let i = 1; i < arrays.length; i++) {\n        if (arrays[i].length < arrays[0].length) {\n            const tmp = arrays[0];\n            arrays[0] = arrays[i];\n            arrays[i] = tmp;\n        }\n    }\n    const set = new Map();\n    for (const elem of arrays[0]) {\n        set.set(elem, 1);\n    }\n    for (let i = 1; i < arrays.length; i++) {\n        let found = 0;\n        for (const elem of arrays[i]) {\n            const count = set.get(elem);\n            if (count === i) {\n                set.set(elem, count + 1);\n                found++;\n            }\n        }\n        if (found === 0)\n            return [];\n    }\n    return arrays[0].filter((e) => {\n        const count = set.get(e);\n        if (count !== undefined)\n            set.set(e, 0);\n        return count === arrays.length;\n    });\n}\nexport function getDocumentProperties(doc, paths) {\n    const properties = {};\n    const pathsLength = paths.length;\n    for (let i = 0; i < pathsLength; i++) {\n        const path = paths[i];\n        const pathTokens = path.split('.');\n        let current = doc;\n        const pathTokensLength = pathTokens.length;\n        for (let j = 0; j < pathTokensLength; j++) {\n            current = current[pathTokens[j]];\n            // We found an object but we were supposed to be done\n            if (typeof current === 'object') {\n                if (current !== null &&\n                    'lat' in current &&\n                    'lon' in current &&\n                    typeof current.lat === 'number' &&\n                    typeof current.lon === 'number') {\n                    current = properties[path] = current;\n                    break;\n                }\n                else if (!Array.isArray(current) && current !== null && j === pathTokensLength - 1) {\n                    current = undefined;\n                    break;\n                }\n            }\n            else if ((current === null || typeof current !== 'object') && j < pathTokensLength - 1) {\n                // We can't recurse anymore but we were supposed to\n                current = undefined;\n                break;\n            }\n        }\n        if (typeof current !== 'undefined') {\n            properties[path] = current;\n        }\n    }\n    return properties;\n}\nexport function getNested(obj, path) {\n    const props = getDocumentProperties(obj, [path]);\n    return props[path];\n}\nexport function flattenObject(obj, prefix = '') {\n    const result = {};\n    for (const key in obj) {\n        const prop = `${prefix}${key}`;\n        const objKey = obj[key];\n        if (typeof objKey === 'object' && objKey !== null) {\n            Object.assign(result, flattenObject(objKey, `${prop}.`));\n        }\n        else {\n            result[prop] = objKey;\n        }\n    }\n    return result;\n}\nconst mapDistanceToMeters = {\n    cm: 0.01,\n    m: 1,\n    km: 1000,\n    ft: 0.3048,\n    yd: 0.9144,\n    mi: 1609.344\n};\nexport function convertDistanceToMeters(distance, unit) {\n    const ratio = mapDistanceToMeters[unit];\n    if (ratio === undefined) {\n        throw new Error(createError('INVALID_DISTANCE_SUFFIX', distance).message);\n    }\n    return distance * ratio;\n}\nexport function removeVectorsFromHits(searchResult, vectorProperties) {\n    searchResult.hits = searchResult.hits.map((result) => ({\n        ...result,\n        document: {\n            ...result.document,\n            // Remove embeddings from the result\n            ...vectorProperties.reduce((acc, prop) => {\n                const path = prop.split('.');\n                const lastKey = path.pop();\n                let obj = acc;\n                for (const key of path) {\n                    obj[key] = obj[key] ?? {};\n                    obj = obj[key];\n                }\n                obj[lastKey] = null;\n                return acc;\n            }, result.document)\n        }\n    }));\n}\nexport function isPromise(obj) {\n    return !!obj && (typeof obj === 'object' || typeof obj === 'function') && typeof obj.then === 'function';\n}\nexport function isAsyncFunction(func) {\n    return func?.constructor?.name === 'AsyncFunction';\n}\nconst withIntersection = 'intersection' in (new Set());\nexport function setIntersection(...sets) {\n    // Fast path 1\n    if (sets.length === 0) {\n        return new Set();\n    }\n    // Fast path 2\n    if (sets.length === 1) {\n        return sets[0];\n    }\n    // Fast path 3\n    if (sets.length === 2) {\n        const set1 = sets[0];\n        const set2 = sets[1];\n        if (withIntersection) {\n            return set1.intersection(set2);\n        }\n        const result = new Set();\n        const base = set1.size < set2.size ? set1 : set2;\n        const other = base === set1 ? set2 : set1;\n        for (const value of base) {\n            if (other.has(value)) {\n                result.add(value);\n            }\n        }\n        return result;\n    }\n    // Slow path\n    // Find the smallest set\n    const min = {\n        index: 0,\n        size: sets[0].size,\n    };\n    for (let i = 1; i < sets.length; i++) {\n        if (sets[i].size < min.size) {\n            min.index = i;\n            min.size = sets[i].size;\n        }\n    }\n    if (withIntersection) {\n        let base = sets[min.index];\n        for (let i = 0; i < sets.length; i++) {\n            if (i === min.index) {\n                continue;\n            }\n            base = base.intersection(sets[i]);\n        }\n        return base;\n    }\n    // manual implementation:\n    // intersect all sets with the smallest set\n    const base = sets[min.index];\n    for (let i = 0; i < sets.length; i++) {\n        if (i === min.index) {\n            continue;\n        }\n        const other = sets[i];\n        for (const value of base) {\n            if (!other.has(value)) {\n                base.delete(value);\n            }\n        }\n    }\n    return base;\n}\nconst withUnion = 'union' in (new Set());\nexport function setUnion(set1, set2) {\n    if (withUnion) {\n        if (set1) {\n            return set1.union(set2);\n        }\n        return set2;\n    }\n    if (!set1) {\n        return new Set(set2);\n    }\n    return new Set([...set1, ...set2]);\n}\n//# sourceMappingURL=utils.js.map", "import { SUPPORTED_LANGUAGES } from './components/tokenizer/languages.js';\nimport { sprintf } from './utils.js';\nconst allLanguages = SUPPORTED_LANGUAGES.join('\\n - ');\nconst errors = {\n    NO_LANGUAGE_WITH_CUSTOM_TOKENIZER: 'Do not pass the language option to create when using a custom tokenizer.',\n    LANGUAGE_NOT_SUPPORTED: `Language \"%s\" is not supported.\\nSupported languages are:\\n - ${allLanguages}`,\n    INVALID_STEMMER_FUNCTION_TYPE: `config.stemmer property must be a function.`,\n    MISSING_STEMMER: `As of version 1.0.0 @orama/orama does not ship non English stemmers by default. To solve this, please explicitly import and specify the \"%s\" stemmer from the package @orama/stemmers. See https://docs.oramasearch.com/open-source/text-analysis/stemming for more information.`,\n    CUSTOM_STOP_WORDS_MUST_BE_FUNCTION_OR_ARRAY: 'Custom stop words array must only contain strings.',\n    UNSUPPORTED_COMPONENT: `Unsupported component \"%s\".`,\n    COMPONENT_MUST_BE_FUNCTION: `The component \"%s\" must be a function.`,\n    COMPONENT_MUST_BE_FUNCTION_OR_ARRAY_FUNCTIONS: `The component \"%s\" must be a function or an array of functions.`,\n    INVALID_SCHEMA_TYPE: `Unsupported schema type \"%s\" at \"%s\". Expected \"string\", \"boolean\" or \"number\" or array of them.`,\n    DOCUMENT_ID_MUST_BE_STRING: `Document id must be of type \"string\". Got \"%s\" instead.`,\n    DOCUMENT_ALREADY_EXISTS: `A document with id \"%s\" already exists.`,\n    DOCUMENT_DOES_NOT_EXIST: `A document with id \"%s\" does not exists.`,\n    MISSING_DOCUMENT_PROPERTY: `Missing searchable property \"%s\".`,\n    INVALID_DOCUMENT_PROPERTY: `Invalid document property \"%s\": expected \"%s\", got \"%s\"`,\n    UNKNOWN_INDEX: `Invalid property name \"%s\". Expected a wildcard string (\"*\") or array containing one of the following properties: %s`,\n    INVALID_BOOST_VALUE: `Boost value must be a number greater than, or less than 0.`,\n    INVALID_FILTER_OPERATION: `You can only use one operation per filter, you requested %d.`,\n    SCHEMA_VALIDATION_FAILURE: `Cannot insert document due schema validation failure on \"%s\" property.`,\n    INVALID_SORT_SCHEMA_TYPE: `Unsupported sort schema type \"%s\" at \"%s\". Expected \"string\" or \"number\".`,\n    CANNOT_SORT_BY_ARRAY: `Cannot configure sort for \"%s\" because it is an array (%s).`,\n    UNABLE_TO_SORT_ON_UNKNOWN_FIELD: `Unable to sort on unknown field \"%s\". Allowed fields: %s`,\n    SORT_DISABLED: `Sort is disabled. Please read the documentation at https://docs.oramasearch for more information.`,\n    UNKNOWN_GROUP_BY_PROPERTY: `Unknown groupBy property \"%s\".`,\n    INVALID_GROUP_BY_PROPERTY: `Invalid groupBy property \"%s\". Allowed types: \"%s\", but given \"%s\".`,\n    UNKNOWN_FILTER_PROPERTY: `Unknown filter property \"%s\".`,\n    INVALID_VECTOR_SIZE: `Vector size must be a number greater than 0. Got \"%s\" instead.`,\n    INVALID_VECTOR_VALUE: `Vector value must be a number greater than 0. Got \"%s\" instead.`,\n    INVALID_INPUT_VECTOR: `Property \"%s\" was declared as a %s-dimensional vector, but got a %s-dimensional vector instead.\\nInput vectors must be of the size declared in the schema, as calculating similarity between vectors of different sizes can lead to unexpected results.`,\n    WRONG_SEARCH_PROPERTY_TYPE: `Property \"%s\" is not searchable. Only \"string\" properties are searchable.`,\n    FACET_NOT_SUPPORTED: `Facet doens't support the type \"%s\".`,\n    INVALID_DISTANCE_SUFFIX: `Invalid distance suffix \"%s\". Valid suffixes are: cm, m, km, mi, yd, ft.`,\n    INVALID_SEARCH_MODE: `Invalid search mode \"%s\". Valid modes are: \"fulltext\", \"vector\", \"hybrid\".`,\n    MISSING_VECTOR_AND_SECURE_PROXY: `No vector was provided and no secure proxy was configured. Please provide a vector or configure an Orama Secure Proxy to perform hybrid search.`,\n    MISSING_TERM: `\"term\" is a required parameter when performing hybrid search. Please provide a search term.`,\n    INVALID_VECTOR_INPUT: `Invalid \"vector\" property. Expected an object with \"value\" and \"property\" properties, but got \"%s\" instead.`,\n    PLUGIN_CRASHED: `A plugin crashed during initialization. Please check the error message for more information:`,\n    PLUGIN_SECURE_PROXY_NOT_FOUND: `Could not find '@orama/secure-proxy-plugin' installed in your Orama instance.\\nPlease install it before proceeding with creating an answer session.\\nRead more at https://docs.orama.com/open-source/plugins/plugin-secure-proxy\\n`,\n    PLUGIN_SECURE_PROXY_MISSING_CHAT_MODEL: `Could not find a chat model defined in the secure proxy plugin configuration.\\nPlease provide a chat model before proceeding with creating an answer session.\\nRead more at https://docs.orama.com/open-source/plugins/plugin-secure-proxy\\n`,\n    ANSWER_SESSION_LAST_MESSAGE_IS_NOT_ASSISTANT: `The last message in the session is not an assistant message. Cannot regenerate non-assistant messages.`,\n    PLUGIN_COMPONENT_CONFLICT: `The component \"%s\" is already defined. The plugin \"%s\" is trying to redefine it.`,\n};\nexport function createError(code, ...args) {\n    const error = new Error(sprintf(errors[code] ?? `Unsupported Orama Error code: ${code}`, ...args));\n    error.code = code;\n    if ('captureStackTrace' in Error.prototype) {\n        Error.captureStackTrace(error);\n    }\n    return error;\n}\n//# sourceMappingURL=errors.js.map", "export function createInternalDocumentIDStore() {\n    return {\n        idToInternalId: new Map(),\n        internalIdToId: [],\n        save,\n        load\n    };\n}\nexport function save(store) {\n    return {\n        internalIdToId: store.internalIdToId\n    };\n}\nexport function load(orama, raw) {\n    const { internalIdToId } = raw;\n    orama.internalDocumentIDStore.idToInternalId.clear();\n    orama.internalDocumentIDStore.internalIdToId = [];\n    const internalIdToIdLength = internalIdToId.length;\n    for (let i = 0; i < internalIdToIdLength; i++) {\n        const internalIdItem = internalIdToId[i];\n        orama.internalDocumentIDStore.idToInternalId.set(internalIdItem, i + 1);\n        orama.internalDocumentIDStore.internalIdToId.push(internalIdItem);\n    }\n}\nexport function getInternalDocumentId(store, id) {\n    if (typeof id === 'string') {\n        const internalId = store.idToInternalId.get(id);\n        if (internalId) {\n            return internalId;\n        }\n        const currentId = store.idToInternalId.size + 1;\n        store.idToInternalId.set(id, currentId);\n        store.internalIdToId.push(id);\n        return currentId;\n    }\n    if (id > store.internalIdToId.length) {\n        return getInternalDocumentId(store, id.toString());\n    }\n    return id;\n}\nexport function getDocumentIdFromInternalId(store, internalId) {\n    if (store.internalIdToId.length < internalId) {\n        throw new Error(`Invalid internalId ${internalId}`);\n    }\n    return store.internalIdToId[internalId - 1];\n}\n//# sourceMappingURL=internal-document-id-store.js.map", "import { isAsyncFunction } from '../utils.js';\nexport const OBJECT_COMPONENTS = ['tokenizer', 'index', 'documentsStore', 'sorter'];\nexport const FUNCTION_COMPONENTS = [\n    'validateSchema',\n    'getDocumentIndexId',\n    'getDocumentProperties',\n    'formatElapsedTime'\n];\nexport const SINGLE_OR_ARRAY_COMPONENTS = [\n/* deprecated with v2.0.0-beta.5 */\n];\nexport function runSingleHook(hooks, orama, id, doc) {\n    const needAsync = hooks.some(isAsyncFunction);\n    if (needAsync) {\n        return (async () => {\n            for (const hook of hooks) {\n                await hook(orama, id, doc);\n            }\n        })();\n    }\n    else {\n        for (const hook of hooks) {\n            hook(orama, id, doc);\n        }\n    }\n}\nexport function runMultipleHook(hooks, orama, docsOrIds) {\n    const needAsync = hooks.some(isAsyncFunction);\n    if (needAsync) {\n        return (async () => {\n            for (const hook of hooks) {\n                await hook(orama, docsOrIds);\n            }\n        })();\n    }\n    else {\n        for (const hook of hooks) {\n            hook(orama, docsOrIds);\n        }\n    }\n}\nexport function runAfterSearch(hooks, db, params, language, results) {\n    const needAsync = hooks.some(isAsyncFunction);\n    if (needAsync) {\n        return (async () => {\n            for (const hook of hooks) {\n                await hook(db, params, language, results);\n            }\n        })();\n    }\n    else {\n        for (const hook of hooks) {\n            hook(db, params, language, results);\n        }\n    }\n}\nexport function runBeforeSearch(hooks, db, params, language) {\n    const needAsync = hooks.some(isAsyncFunction);\n    if (needAsync) {\n        return (async () => {\n            for (const hook of hooks) {\n                await hook(db, params, language);\n            }\n        })();\n    }\n    else {\n        for (const hook of hooks) {\n            hook(db, params, language);\n        }\n    }\n}\nexport function runAfterCreate(hooks, db) {\n    const needAsync = hooks.some(isAsyncFunction);\n    if (needAsync) {\n        return (async () => {\n            for (const hook of hooks) {\n                await hook(db);\n            }\n        })();\n    }\n    else {\n        for (const hook of hooks) {\n            hook(db);\n        }\n    }\n}\n//# sourceMappingURL=hooks.js.map", "export const DEFAULT_SIMILARITY = 0.8;\nexport class VectorIndex {\n    size;\n    vectors = new Map();\n    constructor(size) {\n        this.size = size;\n    }\n    add(internalDocumentId, value) {\n        if (!(value instanceof Float32Array)) {\n            value = new Float32Array(value);\n        }\n        const magnitude = getMagnitude(value, this.size);\n        this.vectors.set(internalDocumentId, [magnitude, value]);\n    }\n    remove(internalDocumentId) {\n        this.vectors.delete(internalDocumentId);\n    }\n    find(vector, similarity, whereFiltersIDs) {\n        if (!(vector instanceof Float32Array)) {\n            vector = new Float32Array(vector);\n        }\n        const results = findSimilarVectors(vector, whereFiltersIDs, this.vectors, this.size, similarity);\n        return results;\n    }\n    toJSON() {\n        const vectors = [];\n        for (const [id, [magnitude, vector]] of this.vectors) {\n            vectors.push([id, [magnitude, Array.from(vector)]]);\n        }\n        return {\n            size: this.size,\n            vectors,\n        };\n    }\n    static fromJSON(json) {\n        const raw = json;\n        const index = new VectorIndex(raw.size);\n        for (const [id, [magnitude, vector]] of raw.vectors) {\n            index.vectors.set(id, [magnitude, new Float32Array(vector)]);\n        }\n        return index;\n    }\n}\nexport function getMagnitude(vector, vectorLength) {\n    let magnitude = 0;\n    for (let i = 0; i < vectorLength; i++) {\n        magnitude += vector[i] * vector[i];\n    }\n    return Math.sqrt(magnitude);\n}\n// @todo: Write plugins for Node and Browsers to use parallel computation for this function\nexport function findSimilarVectors(targetVector, keys, vectors, length, threshold) {\n    const targetMagnitude = getMagnitude(targetVector, length);\n    const similarVectors = [];\n    const base = keys ? keys : vectors.keys();\n    for (const vectorId of base) {\n        const entry = vectors.get(vectorId);\n        if (!entry) {\n            continue;\n        }\n        const magnitude = entry[0];\n        const vector = entry[1];\n        let dotProduct = 0;\n        for (let i = 0; i < length; i++) {\n            dotProduct += targetVector[i] * vector[i];\n        }\n        const similarity = dotProduct / (targetMagnitude * magnitude);\n        if (similarity >= threshold) {\n            similarVectors.push([vectorId, similarity]);\n        }\n    }\n    return similarVectors;\n}\n//# sourceMappingURL=vector.js.map", "export function getByID(db, id) {\n    return db.documentsStore.get(db.data.docs, id);\n}\nexport function count(db) {\n    return db.documentsStore.count(db.data.docs);\n}\n//# sourceMappingURL=docs.js.map", "export const MODE_FULLTEXT_SEARCH = 'fulltext';\nexport const MODE_HYBRID_SEARCH = 'hybrid';\nexport const MODE_VECTOR_SEARCH = 'vector';\n//# sourceMappingURL=constants.js.map", "import { createError } from '../errors.js';\nimport { getNested } from '../utils.js';\nfunction sortAsc(a, b) {\n    return a[1] - b[1];\n}\nfunction sortDesc(a, b) {\n    return b[1] - a[1];\n}\nfunction sortingPredicateBuilder(order = 'desc') {\n    return order.toLowerCase() === 'asc' ? sortAsc : sortDesc;\n}\nexport function getFacets(orama, results, facetsConfig) {\n    const facets = {};\n    const allIDs = results.map(([id]) => id);\n    const allDocs = orama.documentsStore.getMultiple(orama.data.docs, allIDs);\n    const facetKeys = Object.keys(facetsConfig);\n    const properties = orama.index.getSearchablePropertiesWithTypes(orama.data.index);\n    for (const facet of facetKeys) {\n        let values;\n        // Hack to guarantee the same order of ranges as specified by the user\n        // TODO: Revisit this once components land\n        if (properties[facet] === 'number') {\n            const { ranges } = facetsConfig[facet];\n            const rangesLength = ranges.length;\n            const tmp = Array.from({ length: rangesLength });\n            for (let i = 0; i < rangesLength; i++) {\n                const range = ranges[i];\n                tmp[i] = [`${range.from}-${range.to}`, 0];\n            }\n            values = Object.fromEntries(tmp);\n        }\n        facets[facet] = {\n            count: 0,\n            values: values ?? {}\n        };\n    }\n    const allDocsLength = allDocs.length;\n    for (let i = 0; i < allDocsLength; i++) {\n        const doc = allDocs[i];\n        for (const facet of facetKeys) {\n            const facetValue = facet.includes('.') ? getNested(doc, facet) : doc[facet];\n            const propertyType = properties[facet];\n            const facetValues = facets[facet].values;\n            switch (propertyType) {\n                case 'number': {\n                    const ranges = facetsConfig[facet].ranges;\n                    calculateNumberFacetBuilder(ranges, facetValues)(facetValue);\n                    break;\n                }\n                case 'number[]': {\n                    const alreadyInsertedValues = new Set();\n                    const ranges = facetsConfig[facet].ranges;\n                    const calculateNumberFacet = calculateNumberFacetBuilder(ranges, facetValues, alreadyInsertedValues);\n                    for (const v of facetValue) {\n                        calculateNumberFacet(v);\n                    }\n                    break;\n                }\n                case 'boolean':\n                case 'enum':\n                case 'string': {\n                    calculateBooleanStringOrEnumFacetBuilder(facetValues, propertyType)(facetValue);\n                    break;\n                }\n                case 'boolean[]':\n                case 'enum[]':\n                case 'string[]': {\n                    const alreadyInsertedValues = new Set();\n                    const innerType = propertyType === 'boolean[]' ? 'boolean' : 'string';\n                    const calculateBooleanStringOrEnumFacet = calculateBooleanStringOrEnumFacetBuilder(facetValues, innerType, alreadyInsertedValues);\n                    for (const v of facetValue) {\n                        calculateBooleanStringOrEnumFacet(v);\n                    }\n                    break;\n                }\n                default:\n                    throw createError('FACET_NOT_SUPPORTED', propertyType);\n            }\n        }\n    }\n    // TODO: We are looping again with the same previous keys, should we creat a single loop instead?\n    for (const facet of facetKeys) {\n        const currentFacet = facets[facet];\n        // Count the number of values for each facet\n        currentFacet.count = Object.keys(currentFacet.values).length;\n        // Sort only string-based facets\n        if (properties[facet] === 'string') {\n            const stringFacetDefinition = facetsConfig[facet];\n            const sortingPredicate = sortingPredicateBuilder(stringFacetDefinition.sort);\n            currentFacet.values = Object.fromEntries(Object.entries(currentFacet.values)\n                .sort(sortingPredicate)\n                .slice(stringFacetDefinition.offset ?? 0, stringFacetDefinition.limit ?? 10));\n        }\n    }\n    return facets;\n}\nfunction calculateNumberFacetBuilder(ranges, values, alreadyInsertedValues) {\n    return (facetValue) => {\n        for (const range of ranges) {\n            const value = `${range.from}-${range.to}`;\n            if (alreadyInsertedValues?.has(value)) {\n                continue;\n            }\n            if (facetValue >= range.from && facetValue <= range.to) {\n                if (values[value] === undefined) {\n                    values[value] = 1;\n                }\n                else {\n                    values[value]++;\n                    alreadyInsertedValues?.add(value);\n                }\n            }\n        }\n    };\n}\nfunction calculateBooleanStringOrEnumFacetBuilder(values, propertyType, alreadyInsertedValues) {\n    const defaultValue = propertyType === 'boolean' ? 'false' : '';\n    return (facetValue) => {\n        // String or boolean based facets\n        const value = facetValue?.toString() ?? defaultValue;\n        if (alreadyInsertedValues?.has(value)) {\n            return;\n        }\n        values[value] = (values[value] ?? 0) + 1;\n        alreadyInsertedValues?.add(value);\n    };\n}\n//# sourceMappingURL=facets.js.map", "import { createError } from '../errors.js';\nimport { getNested, intersect, safeArrayPush } from '../utils.js';\nimport { getDocumentIdFromInternalId } from './internal-document-id-store.js';\nconst DEFAULT_REDUCE = {\n    reducer: (_, acc, res, index) => {\n        acc[index] = res;\n        return acc;\n    },\n    getInitialValue: (length) => Array.from({ length })\n};\nconst ALLOWED_TYPES = ['string', 'number', 'boolean'];\nexport function getGroups(orama, results, groupBy) {\n    const properties = groupBy.properties;\n    const propertiesLength = properties.length;\n    const schemaProperties = orama.index.getSearchablePropertiesWithTypes(orama.data.index);\n    for (let i = 0; i < propertiesLength; i++) {\n        const property = properties[i];\n        if (typeof schemaProperties[property] === 'undefined') {\n            throw createError('UNKNOWN_GROUP_BY_PROPERTY', property);\n        }\n        if (!ALLOWED_TYPES.includes(schemaProperties[property])) {\n            throw createError('INVALID_GROUP_BY_PROPERTY', property, ALLOWED_TYPES.join(', '), schemaProperties[property]);\n        }\n    }\n    const allIDs = results.map(([id]) => getDocumentIdFromInternalId(orama.internalDocumentIDStore, id));\n    // allDocs is already sorted by the sortBy algorithm\n    // We leverage on that to limit the number of documents returned\n    const allDocs = orama.documentsStore.getMultiple(orama.data.docs, allIDs);\n    const allDocsLength = allDocs.length;\n    const returnedCount = groupBy.maxResult || Number.MAX_SAFE_INTEGER;\n    const listOfValues = [];\n    // We want to understand which documents have which values\n    // and group them by the property and values\n    const g = {};\n    for (let i = 0; i < propertiesLength; i++) {\n        const groupByKey = properties[i];\n        const group = {\n            property: groupByKey,\n            perValue: {}\n        };\n        const values = new Set();\n        for (let j = 0; j < allDocsLength; j++) {\n            const doc = allDocs[j];\n            const value = getNested(doc, groupByKey);\n            // we don't want to consider undefined values\n            if (typeof value === 'undefined') {\n                continue;\n            }\n            const keyValue = typeof value !== 'boolean' ? value : '' + value;\n            const perValue = group.perValue[keyValue] ?? {\n                indexes: [],\n                count: 0\n            };\n            if (perValue.count >= returnedCount) {\n                // We stop early because for this value we react the limit\n                continue;\n            }\n            // We use the index to keep track of the original order\n            perValue.indexes.push(j);\n            perValue.count++;\n            group.perValue[keyValue] = perValue;\n            values.add(value);\n        }\n        listOfValues.push(Array.from(values));\n        g[groupByKey] = group;\n    }\n    const combinations = calculateCombination(listOfValues);\n    const combinationsLength = combinations.length;\n    const groups = [];\n    for (let i = 0; i < combinationsLength; i++) {\n        const combination = combinations[i];\n        const combinationLength = combination.length;\n        const group = {\n            values: [],\n            indexes: []\n        };\n        const indexes = [];\n        for (let j = 0; j < combinationLength; j++) {\n            const value = combination[j];\n            const property = properties[j];\n            indexes.push(g[property].perValue[(typeof value !== 'boolean' ? value : '' + value)].indexes);\n            group.values.push(value);\n        }\n        // We leverage on the index to sort the results by the original order\n        group.indexes = intersect(indexes).sort((a, b) => a - b);\n        // don't generate empty groups\n        if (group.indexes.length === 0) {\n            continue;\n        }\n        groups.push(group);\n    }\n    const groupsLength = groups.length;\n    const res = Array.from({ length: groupsLength });\n    for (let i = 0; i < groupsLength; i++) {\n        const group = groups[i];\n        const reduce = (groupBy.reduce || DEFAULT_REDUCE);\n        const docs = group.indexes.map((index) => {\n            return {\n                id: allIDs[index],\n                score: results[index][1],\n                document: allDocs[index]\n            };\n        });\n        const func = reduce.reducer.bind(null, group.values);\n        const initialValue = reduce.getInitialValue(group.indexes.length);\n        const aggregationValue = docs.reduce(func, initialValue);\n        res[i] = {\n            values: group.values,\n            result: aggregationValue\n        };\n    }\n    return res;\n}\nfunction calculateCombination(arrs, index = 0) {\n    if (index + 1 === arrs.length)\n        return arrs[index].map((item) => [item]);\n    const head = arrs[index];\n    const c = calculateCombination(arrs, index + 1);\n    const combinations = [];\n    for (const value of head) {\n        for (const combination of c) {\n            const result = [value];\n            safeArrayPush(result, combination);\n            combinations.push(result);\n        }\n    }\n    return combinations;\n}\n//# sourceMappingURL=groups.js.map", "import { getFacets } from '../components/facets.js';\nimport { getGroups } from '../components/groups.js';\nimport { runAfterSearch, runBeforeSearch } from '../components/hooks.js';\nimport { getInternalDocumentId } from '../components/internal-document-id-store.js';\nimport { createError } from '../errors.js';\nimport { getNanosecondsTime, removeVectorsFromHits, sortTokenScorePredicate } from '../utils.js';\nimport { count } from './docs.js';\nimport { fetchDocuments, fetchDocumentsWithDistinct } from './search.js';\nexport function innerFullTextSearch(orama, params, language) {\n    const { term, properties } = params;\n    const index = orama.data.index;\n    // Get searchable string properties\n    let propertiesToSearch = orama.caches['propertiesToSearch'];\n    if (!propertiesToSearch) {\n        const propertiesToSearchWithTypes = orama.index.getSearchablePropertiesWithTypes(index);\n        propertiesToSearch = orama.index.getSearchableProperties(index);\n        propertiesToSearch = propertiesToSearch.filter((prop) => propertiesToSearchWithTypes[prop].startsWith('string'));\n        orama.caches['propertiesToSearch'] = propertiesToSearch;\n    }\n    if (properties && properties !== '*') {\n        for (const prop of properties) {\n            if (!propertiesToSearch.includes(prop)) {\n                throw createError('UNKNOWN_INDEX', prop, propertiesToSearch.join(', '));\n            }\n        }\n        propertiesToSearch = propertiesToSearch.filter((prop) => properties.includes(prop));\n    }\n    // If filters are enabled, we need to get the IDs of the documents that match the filters.\n    const hasFilters = Object.keys(params.where ?? {}).length > 0;\n    let whereFiltersIDs;\n    if (hasFilters) {\n        whereFiltersIDs = orama.index.searchByWhereClause(index, orama.tokenizer, params.where, language);\n    }\n    let uniqueDocsIDs;\n    // We need to perform the search if:\n    // - we have a search term\n    // - or we have properties to search\n    //   in this case, we need to return all the documents that contains at least one of the given properties\n    if (term || properties) {\n        const docsCount = count(orama);\n        uniqueDocsIDs = orama.index.search(index, term || '', orama.tokenizer, language, propertiesToSearch, params.exact || false, params.tolerance || 0, params.boost || {}, applyDefault(params.relevance), docsCount, whereFiltersIDs);\n    }\n    else {\n        // Tokenizer returns empty array and the search term is empty as well.\n        // We return all the documents.\n        const docIds = whereFiltersIDs ? Array.from(whereFiltersIDs) : Object.keys(orama.documentsStore.getAll(orama.data.docs));\n        uniqueDocsIDs = docIds.map((k) => [+k, 0]);\n    }\n    return uniqueDocsIDs;\n}\nexport function fullTextSearch(orama, params, language) {\n    const timeStart = getNanosecondsTime();\n    function performSearchLogic() {\n        const vectorProperties = Object.keys(orama.data.index.vectorIndexes);\n        const shouldCalculateFacets = params.facets && Object.keys(params.facets).length > 0;\n        const { limit = 10, offset = 0, distinctOn, includeVectors = false } = params;\n        const isPreflight = params.preflight === true;\n        let uniqueDocsArray = innerFullTextSearch(orama, params, language);\n        if (params.sortBy) {\n            if (typeof params.sortBy === 'function') {\n                const ids = uniqueDocsArray.map(([id]) => id);\n                const docs = orama.documentsStore.getMultiple(orama.data.docs, ids);\n                const docsWithIdAndScore = docs.map((d, i) => [\n                    uniqueDocsArray[i][0],\n                    uniqueDocsArray[i][1],\n                    d\n                ]);\n                docsWithIdAndScore.sort(params.sortBy);\n                uniqueDocsArray = docsWithIdAndScore.map(([id, score]) => [id, score]);\n            }\n            else {\n                uniqueDocsArray = orama.sorter\n                    .sortBy(orama.data.sorting, uniqueDocsArray, params.sortBy)\n                    .map(([id, score]) => [getInternalDocumentId(orama.internalDocumentIDStore, id), score]);\n            }\n        }\n        else {\n            uniqueDocsArray = uniqueDocsArray.sort(sortTokenScorePredicate);\n        }\n        let results;\n        if (!isPreflight) {\n            results = distinctOn\n                ? fetchDocumentsWithDistinct(orama, uniqueDocsArray, offset, limit, distinctOn)\n                : fetchDocuments(orama, uniqueDocsArray, offset, limit);\n        }\n        const searchResult = {\n            elapsed: {\n                formatted: '',\n                raw: 0\n            },\n            hits: [],\n            count: uniqueDocsArray.length\n        };\n        if (typeof results !== 'undefined') {\n            searchResult.hits = results.filter(Boolean);\n            if (!includeVectors) {\n                removeVectorsFromHits(searchResult, vectorProperties);\n            }\n        }\n        if (shouldCalculateFacets) {\n            const facets = getFacets(orama, uniqueDocsArray, params.facets);\n            searchResult.facets = facets;\n        }\n        if (params.groupBy) {\n            searchResult.groups = getGroups(orama, uniqueDocsArray, params.groupBy);\n        }\n        searchResult.elapsed = orama.formatElapsedTime(getNanosecondsTime() - timeStart);\n        return searchResult;\n    }\n    async function executeSearchAsync() {\n        if (orama.beforeSearch) {\n            await runBeforeSearch(orama.beforeSearch, orama, params, language);\n        }\n        const searchResult = performSearchLogic();\n        if (orama.afterSearch) {\n            await runAfterSearch(orama.afterSearch, orama, params, language, searchResult);\n        }\n        return searchResult;\n    }\n    const asyncNeeded = orama.beforeSearch?.length || orama.afterSearch?.length;\n    if (asyncNeeded) {\n        return executeSearchAsync();\n    }\n    return performSearchLogic();\n}\nexport const defaultBM25Params = {\n    k: 1.2,\n    b: 0.75,\n    d: 0.5\n};\nfunction applyDefault(bm25Relevance) {\n    const r = bm25Relevance ?? {};\n    r.k = r.k ?? defaultBM25Params.k;\n    r.b = r.b ?? defaultBM25Params.b;\n    r.d = r.d ?? defaultBM25Params.d;\n    return r;\n}\n//# sourceMappingURL=search-fulltext.js.map", "import { getNanosecondsTime, formatNanoseconds, sortTokenScorePredicate } from '../utils.js';\nimport { getFacets } from '../components/facets.js';\nimport { createError } from '../errors.js';\nimport { getGroups } from '../components/groups.js';\nimport { getDocumentIdFromInternalId } from '../components/internal-document-id-store.js';\nimport { runBeforeSearch, runAfterSearch } from '../components/hooks.js';\nimport { DEFAULT_SIMILARITY } from '../trees/vector.js';\nexport function innerVectorSearch(orama, params, language) {\n    const vector = params.vector;\n    if (vector && (!('value' in vector) || !('property' in vector))) {\n        throw createError('INVALID_VECTOR_INPUT', Object.keys(vector).join(', '));\n    }\n    const vectorIndex = orama.data.index.vectorIndexes[vector.property];\n    const vectorSize = vectorIndex.node.size;\n    if (vector?.value.length !== vectorSize) {\n        if (vector?.property === undefined || vector?.value.length === undefined) {\n            throw createError('INVALID_INPUT_VECTOR', 'undefined', vectorSize, 'undefined');\n        }\n        throw createError('INVALID_INPUT_VECTOR', vector.property, vectorSize, vector.value.length);\n    }\n    const index = orama.data.index;\n    let whereFiltersIDs;\n    const hasFilters = Object.keys(params.where ?? {}).length > 0;\n    if (hasFilters) {\n        whereFiltersIDs = orama.index.searchByWhereClause(index, orama.tokenizer, params.where, language);\n    }\n    return vectorIndex.node.find(vector.value, params.similarity ?? DEFAULT_SIMILARITY, whereFiltersIDs);\n}\nexport function searchVector(orama, params, language = 'english') {\n    const timeStart = getNanosecondsTime();\n    function performSearchLogic() {\n        const results = innerVectorSearch(orama, params, language)\n            .sort(sortTokenScorePredicate);\n        let facetsResults = [];\n        const shouldCalculateFacets = params.facets && Object.keys(params.facets).length > 0;\n        if (shouldCalculateFacets) {\n            const facets = getFacets(orama, results, params.facets);\n            facetsResults = facets;\n        }\n        const vectorProperty = params.vector.property;\n        const includeVectors = params.includeVectors ?? false;\n        const limit = params.limit ?? 10;\n        const offset = params.offset ?? 0;\n        const docs = Array.from({ length: limit });\n        for (let i = 0; i < limit; i++) {\n            const result = results[i + offset];\n            if (!result) {\n                break;\n            }\n            const doc = orama.data.docs.docs[result[0]];\n            if (doc) {\n                if (!includeVectors) {\n                    doc[vectorProperty] = null;\n                }\n                const newDoc = {\n                    id: getDocumentIdFromInternalId(orama.internalDocumentIDStore, result[0]),\n                    score: result[1],\n                    document: doc\n                };\n                docs[i] = newDoc;\n            }\n        }\n        let groups = [];\n        if (params.groupBy) {\n            groups = getGroups(orama, results, params.groupBy);\n        }\n        const timeEnd = getNanosecondsTime();\n        const elapsedTime = timeEnd - timeStart;\n        return {\n            count: results.length,\n            hits: docs.filter(Boolean),\n            elapsed: {\n                raw: Number(elapsedTime),\n                formatted: formatNanoseconds(elapsedTime)\n            },\n            ...(facetsResults ? { facets: facetsResults } : {}),\n            ...(groups ? { groups } : {})\n        };\n    }\n    async function executeSearchAsync() {\n        if (orama.beforeSearch) {\n            await runBeforeSearch(orama.beforeSearch, orama, params, language);\n        }\n        const results = performSearchLogic();\n        if (orama.afterSearch) {\n            await runAfterSearch(orama.afterSearch, orama, params, language, results);\n        }\n        return results;\n    }\n    const asyncNeeded = orama.beforeSearch?.length || orama.afterSearch?.length;\n    if (asyncNeeded) {\n        return executeSearchAsync();\n    }\n    // Sync path\n    return performSearchLogic();\n}\n//# sourceMappingURL=search-vector.js.map", "import { getNanosecondsTime, formatNanoseconds, removeVectorsFromHits } from '../utils.js';\nimport { getFacets } from '../components/facets.js';\nimport { getGroups } from '../components/groups.js';\nimport { fetchDocuments } from './search.js';\nimport { innerFullTextSearch } from './search-fulltext.js';\nimport { innerVectorSearch } from './search-vector.js';\nimport { runAfterSearch, runBeforeSearch } from '../components/hooks.js';\nexport function innerHybridSearch(orama, params, language) {\n    const fullTextIDs = minMaxScoreNormalization(innerFullTextSearch(orama, params, language));\n    const vectorIDs = innerVectorSearch(orama, params, language);\n    const hybridWeights = params.hybridWeights;\n    return mergeAndRankResults(fullTextIDs, vectorIDs, params.term ?? '', hybridWeights);\n}\nexport function hybridSearch(orama, params, language) {\n    const timeStart = getNanosecondsTime();\n    function performSearchLogic() {\n        const uniqueTokenScores = innerHybridSearch(orama, params, language);\n        let facetsResults;\n        const shouldCalculateFacets = params.facets && Object.keys(params.facets).length > 0;\n        if (shouldCalculateFacets) {\n            facetsResults = getFacets(orama, uniqueTokenScores, params.facets);\n        }\n        let groups;\n        if (params.groupBy) {\n            groups = getGroups(orama, uniqueTokenScores, params.groupBy);\n        }\n        const offset = params.offset ?? 0;\n        const limit = params.limit ?? 10;\n        const results = fetchDocuments(orama, uniqueTokenScores, offset, limit).filter(Boolean);\n        const timeEnd = getNanosecondsTime();\n        const returningResults = {\n            count: uniqueTokenScores.length,\n            elapsed: {\n                raw: Number(timeEnd - timeStart),\n                formatted: formatNanoseconds(timeEnd - timeStart)\n            },\n            hits: results,\n            ...(facetsResults ? { facets: facetsResults } : {}),\n            ...(groups ? { groups } : {})\n        };\n        const includeVectors = params.includeVectors ?? false;\n        if (!includeVectors) {\n            const vectorProperties = Object.keys(orama.data.index.vectorIndexes);\n            removeVectorsFromHits(returningResults, vectorProperties);\n        }\n        return returningResults;\n    }\n    async function executeSearchAsync() {\n        if (orama.beforeSearch) {\n            await runBeforeSearch(orama.beforeSearch, orama, params, language);\n        }\n        const results = performSearchLogic();\n        if (orama.afterSearch) {\n            await runAfterSearch(orama.afterSearch, orama, params, language, results);\n        }\n        return results;\n    }\n    const asyncNeeded = orama.beforeSearch?.length || orama.afterSearch?.length;\n    if (asyncNeeded) {\n        return executeSearchAsync();\n    }\n    return performSearchLogic();\n}\nfunction extractScore(token) {\n    return token[1];\n}\nfunction minMaxScoreNormalization(results) {\n    // In this case I disabled the `prefer-spread` rule because spread seems to be slower\n    // eslint-disable-next-line prefer-spread\n    const maxScore = Math.max.apply(Math, results.map(extractScore));\n    return results.map(([id, score]) => [id, score / maxScore]);\n}\nfunction normalizeScore(score, maxScore) {\n    return score / maxScore;\n}\nfunction hybridScoreBuilder(textWeight, vectorWeight) {\n    return (textScore, vectorScore) => textScore * textWeight + vectorScore * vectorWeight;\n}\nfunction mergeAndRankResults(textResults, vectorResults, query, hybridWeights) {\n    // eslint-disable-next-line prefer-spread\n    const maxTextScore = Math.max.apply(Math, textResults.map(extractScore));\n    // eslint-disable-next-line prefer-spread\n    const maxVectorScore = Math.max.apply(Math, vectorResults.map(extractScore));\n    const hasHybridWeights = hybridWeights && hybridWeights.text && hybridWeights.vector;\n    const { text: textWeight, vector: vectorWeight } = hasHybridWeights ? hybridWeights : getQueryWeights(query);\n    const mergedResults = new Map();\n    const textResultsLength = textResults.length;\n    const hybridScore = hybridScoreBuilder(textWeight, vectorWeight);\n    for (let i = 0; i < textResultsLength; i++) {\n        const [id, score] = textResults[i];\n        const normalizedScore = normalizeScore(score, maxTextScore);\n        const hybridScoreValue = hybridScore(normalizedScore, 0);\n        mergedResults.set(id, hybridScoreValue);\n    }\n    const vectorResultsLength = vectorResults.length;\n    for (let i = 0; i < vectorResultsLength; i++) {\n        const [resultId, score] = vectorResults[i];\n        const normalizedScore = normalizeScore(score, maxVectorScore);\n        const existingRes = mergedResults.get(resultId) ?? 0;\n        mergedResults.set(resultId, existingRes + hybridScore(0, normalizedScore));\n    }\n    return [...mergedResults].sort((a, b) => b[1] - a[1]);\n}\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction getQueryWeights(query) {\n    // In the next versions of Orama, we will ship a plugin containing a ML model to adjust the weights\n    // based on whether the query is keyword-focused, conceptual, etc.\n    // For now, we just return a fixed value.\n    return {\n        text: 0.5,\n        vector: 0.5\n    };\n}\n//# sourceMappingURL=search-hybrid.js.map", "import { getDocumentIdFromInternalId } from '../components/internal-document-id-store.js';\nimport { createError } from '../errors.js';\nimport { getNested } from '../utils.js';\nimport { MODE_FULLTEXT_SEARCH, MODE_HYBRID_SEARCH, MODE_VECTOR_SEARCH } from '../constants.js';\nimport { fullTextSearch } from './search-fulltext.js';\nimport { searchVector } from './search-vector.js';\nimport { hybridSearch } from './search-hybrid.js';\nexport function search(orama, params, language) {\n    const mode = params.mode ?? MODE_FULLTEXT_SEARCH;\n    if (mode === MODE_FULLTEXT_SEARCH) {\n        return fullTextSearch(orama, params, language);\n    }\n    if (mode === MODE_VECTOR_SEARCH) {\n        return searchVector(orama, params);\n    }\n    if (mode === MODE_HYBRID_SEARCH) {\n        return hybridSearch(orama, params);\n    }\n    throw createError('INVALID_SEARCH_MODE', mode);\n}\nexport function fetchDocumentsWithDistinct(orama, uniqueDocsArray, offset, limit, distinctOn) {\n    const docs = orama.data.docs;\n    // Keep track which values we already seen\n    const values = new Map();\n    // We cannot know how many results we will have in the end,\n    // so we need cannot pre-allocate the array.\n    const results = [];\n    const resultIDs = new Set();\n    const uniqueDocsArrayLength = uniqueDocsArray.length;\n    let count = 0;\n    for (let i = 0; i < uniqueDocsArrayLength; i++) {\n        const idAndScore = uniqueDocsArray[i];\n        // If there are no more results, just break the loop\n        if (typeof idAndScore === 'undefined') {\n            continue;\n        }\n        const [id, score] = idAndScore;\n        if (resultIDs.has(id)) {\n            continue;\n        }\n        const doc = orama.documentsStore.get(docs, id);\n        const value = getNested(doc, distinctOn);\n        if (typeof value === 'undefined' || values.has(value)) {\n            continue;\n        }\n        values.set(value, true);\n        count++;\n        // We shouldn't consider the document if it's not in the offset range\n        if (count <= offset) {\n            continue;\n        }\n        results.push({ id: getDocumentIdFromInternalId(orama.internalDocumentIDStore, id), score, document: doc });\n        resultIDs.add(id);\n        // reached the limit, break the loop\n        if (count >= offset + limit) {\n            break;\n        }\n    }\n    return results;\n}\nexport function fetchDocuments(orama, uniqueDocsArray, offset, limit) {\n    const docs = orama.data.docs;\n    const results = Array.from({\n        length: limit\n    });\n    const resultIDs = new Set();\n    // We already have the list of ALL the document IDs containing the search terms.\n    // We loop over them starting from a positional value \"offset\" and ending at \"offset + limit\"\n    // to provide pagination capabilities to the search.\n    for (let i = offset; i < limit + offset; i++) {\n        const idAndScore = uniqueDocsArray[i];\n        // If there are no more results, just break the loop\n        if (typeof idAndScore === 'undefined') {\n            break;\n        }\n        const [id, score] = idAndScore;\n        if (!resultIDs.has(id)) {\n            // We retrieve the full document only AFTER making sure that we really want it.\n            // We never retrieve the full document preventively.\n            const fullDoc = orama.documentsStore.get(docs, id);\n            results[i] = { id: getDocumentIdFromInternalId(orama.internalDocumentIDStore, id), score, document: fullDoc };\n            resultIDs.add(id);\n        }\n    }\n    return results;\n}\n//# sourceMappingURL=search.js.map", "import { createError } from '../errors.js';\nimport { search } from './search.js';\nconst ORAMA_SECURE_PROXY_PLUGIN_NAME = 'orama-secure-proxy';\nexport class AnswerSession {\n    db;\n    proxy = null;\n    config;\n    abortController = null;\n    lastInteractionParams = null;\n    chatModel = null;\n    conversationID;\n    messages = [];\n    events;\n    initPromise;\n    state = [];\n    constructor(db, config) {\n        this.db = db;\n        this.config = config;\n        this.init();\n        this.messages = config.initialMessages || [];\n        this.events = config.events || {};\n        this.conversationID = config.conversationID || this.generateRandomID();\n    }\n    async ask(query) {\n        await this.initPromise;\n        let output = '';\n        for await (const msg of await this.askStream(query)) {\n            output += msg;\n        }\n        return output;\n    }\n    async askStream(query) {\n        await this.initPromise;\n        return this.fetchAnswer(query);\n    }\n    abortAnswer() {\n        this.abortController?.abort();\n        this.state[this.state.length - 1].aborted = true;\n        this.triggerStateChange();\n    }\n    getMessages() {\n        return this.messages;\n    }\n    clearSession() {\n        this.messages = [];\n        this.state = [];\n    }\n    regenerateLast({ stream = true }) {\n        if (this.state.length === 0 || this.messages.length === 0) {\n            throw new Error('No messages to regenerate');\n        }\n        const isLastMessageAssistant = this.messages.at(-1)?.role === 'assistant';\n        if (!isLastMessageAssistant) {\n            throw createError('ANSWER_SESSION_LAST_MESSAGE_IS_NOT_ASSISTANT');\n        }\n        this.messages.pop();\n        this.state.pop();\n        if (stream) {\n            return this.askStream(this.lastInteractionParams);\n        }\n        return this.ask(this.lastInteractionParams);\n    }\n    async *fetchAnswer(params) {\n        if (!this.chatModel) {\n            throw createError('PLUGIN_SECURE_PROXY_MISSING_CHAT_MODEL');\n        }\n        this.abortController = new AbortController();\n        this.lastInteractionParams = params;\n        const interactionId = this.generateRandomID();\n        this.messages.push({ role: 'user', content: params.term ?? '' });\n        this.state.push({\n            interactionId,\n            aborted: false,\n            loading: true,\n            query: params.term ?? '',\n            response: '',\n            sources: null,\n            translatedQuery: null,\n            error: false,\n            errorMessage: null\n        });\n        const stateIdx = this.state.length - 1;\n        this.addEmptyAssistantMessage();\n        this.triggerStateChange();\n        try {\n            const sources = await search(this.db, params);\n            this.state[stateIdx].sources = sources;\n            this.triggerStateChange();\n            for await (const msg of this.proxy.chatStream({ model: this.chatModel, messages: this.messages })) {\n                yield msg;\n                this.state[stateIdx].response += msg;\n                this.messages.findLast((msg) => msg.role === 'assistant').content += msg;\n                this.triggerStateChange();\n            }\n        }\n        catch (err) {\n            if (err.name === 'AbortError') {\n                this.state[stateIdx].aborted = true;\n            }\n            else {\n                this.state[stateIdx].error = true;\n                this.state[stateIdx].errorMessage = err.toString();\n            }\n            this.triggerStateChange();\n        }\n        this.state[stateIdx].loading = false;\n        this.triggerStateChange();\n        return this.state[stateIdx].response;\n    }\n    generateRandomID(length = 24) {\n        return Array.from({ length }, () => Math.floor(Math.random() * 36).toString(36)).join('');\n    }\n    triggerStateChange() {\n        if (this.events.onStateChange) {\n            this.events.onStateChange(this.state);\n        }\n    }\n    async init() {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const self = this;\n        async function getPlugin() {\n            return await self.db.plugins.find((plugin) => plugin.name === ORAMA_SECURE_PROXY_PLUGIN_NAME);\n        }\n        const plugin = await getPlugin();\n        if (!plugin) {\n            throw createError('PLUGIN_SECURE_PROXY_NOT_FOUND');\n        }\n        const pluginExtras = plugin.extra;\n        this.proxy = pluginExtras.proxy;\n        if (this.config.systemPrompt) {\n            this.messages.push({ role: 'system', content: this.config.systemPrompt });\n        }\n        if (pluginExtras?.pluginParams?.chat?.model) {\n            this.chatModel = pluginExtras.pluginParams.chat.model;\n        }\n        else {\n            throw createError('PLUGIN_SECURE_PROXY_MISSING_CHAT_MODEL');\n        }\n    }\n    addEmptyAssistantMessage() {\n        this.messages.push({ role: 'assistant', content: '' });\n    }\n}\n//# sourceMappingURL=answer-session.js.map", "// src/index.ts\nimport { search, AnswerSession as OSSAnswerSession } from \"@orama/orama\";\nfunction isOramaClient(client) {\n  return client && typeof client === \"object\" && \"api_key\" in client && \"endpoint\" in client;\n}\nvar Switch = class {\n  invalidClientError = \"Invalid client. Expected either an OramaClient or an Orama OSS database.\";\n  client;\n  clientType;\n  isCloud = false;\n  isOSS = false;\n  constructor(client) {\n    this.client = client;\n    if (isOramaClient(client)) {\n      this.clientType = \"cloud\";\n      this.isCloud = true;\n    } else if (typeof client === \"object\" && \"id\" in client && \"tokenizer\" in client) {\n      this.clientType = \"oss\";\n      this.isOSS = true;\n    } else {\n      throw new Error(this.invalidClientError);\n    }\n  }\n  async search(params, config) {\n    if (this.isCloud) {\n      return this.client.search(params, config);\n    } else {\n      return search(this.client, params);\n    }\n  }\n  createAnswerSession(params) {\n    if (this.isCloud) {\n      const p = params;\n      return this.client.createAnswerSession(p);\n    }\n    if (this.isOSS) {\n      const p = params;\n      return new OSSAnswerSession(this.client, {\n        conversationID: p.conversationID,\n        initialMessages: p.initialMessages,\n        events: p.events,\n        userContext: p.userContext,\n        systemPrompt: p.systemPrompt\n      });\n    }\n    throw new Error(this.invalidClientError);\n  }\n};\nexport {\n  Switch\n};\n//# sourceMappingURL=index.js.map", "var Pt=Object.create;var pe=Object.defineProperty;var vt=Object.getOwnPropertyDescriptor;var Ct=Object.getOwnPropertyNames;var _t=Object.getPrototypeOf,Nt=Object.prototype.hasOwnProperty;var A=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Dt=(t,e,n,r)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of Ct(e))!Nt.call(t,s)&&s!==n&&pe(t,s,{get:()=>e[s],enumerable:!(r=vt(e,s))||r.enumerable});return t};var Y=(t,e,n)=>(n=t!=null?Pt(_t(t)):{},Dt(e||!t||!t.__esModule?pe(n,\"default\",{value:t,enumerable:!0}):n,t));var Q=A(y=>{\"use strict\";Object.defineProperty(y,\"__esModule\",{value:!0});y.isBytes=ge;y.number=R;y.bool=me;y.bytes=X;y.hash=ye;y.exists=Se;y.output=be;function R(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function me(t){if(typeof t!=\"boolean\")throw new Error(`boolean expected, not ${t}`)}function ge(t){return t instanceof Uint8Array||t!=null&&typeof t==\"object\"&&t.constructor.name===\"Uint8Array\"}function X(t,...e){if(!ge(t))throw new Error(\"Uint8Array expected\");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function ye(t){if(typeof t!=\"function\"||typeof t.create!=\"function\")throw new Error(\"Hash should be wrapped by utils.wrapConstructor\");R(t.outputLen),R(t.blockLen)}function Se(t,e=!0){if(t.destroyed)throw new Error(\"Hash instance has been destroyed\");if(e&&t.finished)throw new Error(\"Hash#digest() has already been called\")}function be(t,e){X(t);let n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}var kt={number:R,bool:me,bytes:X,hash:ye,exists:Se,output:be};y.default=kt});var Fe=A(a=>{\"use strict\";Object.defineProperty(a,\"__esModule\",{value:!0});a.add5L=a.add5H=a.add4H=a.add4L=a.add3H=a.add3L=a.rotlBL=a.rotlBH=a.rotlSL=a.rotlSH=a.rotr32L=a.rotr32H=a.rotrBL=a.rotrBH=a.rotrSL=a.rotrSH=a.shrSL=a.shrSH=a.toBig=void 0;a.fromBig=ee;a.split=Ie;a.add=Le;var M=BigInt(2**32-1),Z=BigInt(32);function ee(t,e=!1){return e?{h:Number(t&M),l:Number(t>>Z&M)}:{h:Number(t>>Z&M)|0,l:Number(t&M)|0}}function Ie(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){let{h:o,l:i}=ee(t[s],e);[n[s],r[s]]=[o,i]}return[n,r]}var Te=(t,e)=>BigInt(t>>>0)<<Z|BigInt(e>>>0);a.toBig=Te;var we=(t,e,n)=>t>>>n;a.shrSH=we;var xe=(t,e,n)=>t<<32-n|e>>>n;a.shrSL=xe;var Ae=(t,e,n)=>t>>>n|e<<32-n;a.rotrSH=Ae;var Oe=(t,e,n)=>t<<32-n|e>>>n;a.rotrSL=Oe;var Ee=(t,e,n)=>t<<64-n|e>>>n-32;a.rotrBH=Ee;var Pe=(t,e,n)=>t>>>n-32|e<<64-n;a.rotrBL=Pe;var ve=(t,e)=>e;a.rotr32H=ve;var Ce=(t,e)=>t;a.rotr32L=Ce;var _e=(t,e,n)=>t<<n|e>>>32-n;a.rotlSH=_e;var Ne=(t,e,n)=>e<<n|t>>>32-n;a.rotlSL=Ne;var De=(t,e,n)=>e<<n-32|t>>>64-n;a.rotlBH=De;var ke=(t,e,n)=>t<<n-32|e>>>64-n;a.rotlBL=ke;function Le(t,e,n,r){let s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}var Re=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0);a.add3L=Re;var Me=(t,e,n,r)=>e+n+r+(t/2**32|0)|0;a.add3H=Me;var Be=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0);a.add4L=Be;var Ue=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0;a.add4H=Ue;var ze=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0);a.add5L=ze;var He=(t,e,n,r,s,o)=>e+n+r+s+o+(t/2**32|0)|0;a.add5H=He;var Lt={fromBig:ee,split:Ie,toBig:Te,shrSH:we,shrSL:xe,rotrSH:Ae,rotrSL:Oe,rotrBH:Ee,rotrBL:Pe,rotr32H:ve,rotr32L:Ce,rotlSH:_e,rotlSL:Ne,rotlBH:De,rotlBL:ke,add:Le,add3L:Re,add3H:Me,add4L:Be,add4H:Ue,add5H:He,add5L:ze};a.default=Lt});var We=A(B=>{\"use strict\";Object.defineProperty(B,\"__esModule\",{value:!0});B.crypto=void 0;B.crypto=typeof globalThis==\"object\"&&\"crypto\"in globalThis?globalThis.crypto:void 0});var je=A(c=>{\"use strict\";Object.defineProperty(c,\"__esModule\",{value:!0});c.Hash=c.nextTick=c.byteSwapIfBE=c.byteSwap=c.isLE=c.rotl=c.rotr=c.createView=c.u32=c.u8=void 0;c.isBytes=Rt;c.byteSwap32=Wt;c.bytesToHex=$t;c.hexToBytes=jt;c.asyncLoop=Kt;c.utf8ToBytes=$e;c.toBytes=U;c.concatBytes=qt;c.checkOpts=Yt;c.wrapConstructor=Xt;c.wrapConstructorWithOpts=Qt;c.wrapXOFConstructorWithOpts=Zt;c.randomBytes=en;var E=We(),ne=Q();function Rt(t){return t instanceof Uint8Array||t!=null&&typeof t==\"object\"&&t.constructor.name===\"Uint8Array\"}var Mt=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength);c.u8=Mt;var Bt=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4));c.u32=Bt;var Ut=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);c.createView=Ut;var zt=(t,e)=>t<<32-e|t>>>e;c.rotr=zt;var Ht=(t,e)=>t<<e|t>>>32-e>>>0;c.rotl=Ht;c.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;var Ft=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;c.byteSwap=Ft;c.byteSwapIfBE=c.isLE?t=>t:t=>(0,c.byteSwap)(t);function Wt(t){for(let e=0;e<t.length;e++)t[e]=(0,c.byteSwap)(t[e])}var Vt=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,\"0\"));function $t(t){(0,ne.bytes)(t);let e=\"\";for(let n=0;n<t.length;n++)e+=Vt[t[n]];return e}var S={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Ve(t){if(t>=S._0&&t<=S._9)return t-S._0;if(t>=S._A&&t<=S._F)return t-(S._A-10);if(t>=S._a&&t<=S._f)return t-(S._a-10)}function jt(t){if(typeof t!=\"string\")throw new Error(\"hex string expected, got \"+typeof t);let e=t.length,n=e/2;if(e%2)throw new Error(\"padded hex string expected, got unpadded hex of length \"+e);let r=new Uint8Array(n);for(let s=0,o=0;s<n;s++,o+=2){let i=Ve(t.charCodeAt(o)),l=Ve(t.charCodeAt(o+1));if(i===void 0||l===void 0){let f=t[o]+t[o+1];throw new Error('hex string expected, got non-hex character \"'+f+'\" at index '+o)}r[s]=i*16+l}return r}var Jt=async()=>{};c.nextTick=Jt;async function Kt(t,e,n){let r=Date.now();for(let s=0;s<t;s++){n(s);let o=Date.now()-r;o>=0&&o<e||(await(0,c.nextTick)(),r+=o)}}function $e(t){if(typeof t!=\"string\")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function U(t){return typeof t==\"string\"&&(t=$e(t)),(0,ne.bytes)(t),t}function qt(...t){let e=0;for(let r=0;r<t.length;r++){let s=t[r];(0,ne.bytes)(s),e+=s.length}let n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){let o=t[r];n.set(o,s),s+=o.length}return n}var te=class{clone(){return this._cloneInto()}};c.Hash=te;var Gt={}.toString;function Yt(t,e){if(e!==void 0&&Gt.call(e)!==\"[object Object]\")throw new Error(\"Options should be object or undefined\");return Object.assign(t,e)}function Xt(t){let e=r=>t().update(U(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Qt(t){let e=(r,s)=>t(s).update(U(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function Zt(t){let e=(r,s)=>t(s).update(U(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function en(t=32){if(E.crypto&&typeof E.crypto.getRandomValues==\"function\")return E.crypto.getRandomValues(new Uint8Array(t));if(E.crypto&&typeof E.crypto.randomBytes==\"function\")return E.crypto.randomBytes(t);throw new Error(\"crypto.getRandomValues must be defined\")}});var Ze=A(d=>{\"use strict\";Object.defineProperty(d,\"__esModule\",{value:!0});d.shake256=d.shake128=d.keccak_512=d.keccak_384=d.keccak_256=d.keccak_224=d.sha3_512=d.sha3_384=d.sha3_256=d.sha3_224=d.Keccak=void 0;d.keccakP=Xe;var P=Q(),C=Fe(),b=je(),qe=[],Ge=[],Ye=[],tn=BigInt(0),v=BigInt(1),nn=BigInt(2),rn=BigInt(7),sn=BigInt(256),on=BigInt(113);for(let t=0,e=v,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],qe.push(2*(5*r+n)),Ge.push((t+1)*(t+2)/2%64);let s=tn;for(let o=0;o<7;o++)e=(e<<v^(e>>rn)*on)%sn,e&nn&&(s^=v<<(v<<BigInt(o))-v);Ye.push(s)}var[an,cn]=(0,C.split)(Ye,!0),Je=(t,e,n)=>n>32?(0,C.rotlBH)(t,e,n):(0,C.rotlSH)(t,e,n),Ke=(t,e,n)=>n>32?(0,C.rotlBL)(t,e,n):(0,C.rotlSL)(t,e,n);function Xe(t,e=24){let n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let i=0;i<10;i++)n[i]=t[i]^t[i+10]^t[i+20]^t[i+30]^t[i+40];for(let i=0;i<10;i+=2){let l=(i+8)%10,f=(i+2)%10,h=n[f],u=n[f+1],p=Je(h,u,1)^n[l],m=Ke(h,u,1)^n[l+1];for(let I=0;I<50;I+=10)t[i+I]^=p,t[i+I+1]^=m}let s=t[2],o=t[3];for(let i=0;i<24;i++){let l=Ge[i],f=Je(s,o,l),h=Ke(s,o,l),u=qe[i];s=t[u],o=t[u+1],t[u]=f,t[u+1]=h}for(let i=0;i<50;i+=10){for(let l=0;l<10;l++)n[l]=t[i+l];for(let l=0;l<10;l++)t[i+l]^=~n[(l+2)%10]&n[(l+4)%10]}t[0]^=an[r],t[1]^=cn[r]}n.fill(0)}var _=class t extends b.Hash{constructor(e,n,r,s=!1,o=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,P.number)(r),0>=this.blockLen||this.blockLen>=200)throw new Error(\"Sha3 supports only keccak-f1600 function\");this.state=new Uint8Array(200),this.state32=(0,b.u32)(this.state)}keccak(){b.isLE||(0,b.byteSwap32)(this.state32),Xe(this.state32,this.rounds),b.isLE||(0,b.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(e){(0,P.exists)(this);let{blockLen:n,state:r}=this;e=(0,b.toBytes)(e);let s=e.length;for(let o=0;o<s;){let i=Math.min(n-this.pos,s-o);for(let l=0;l<i;l++)r[this.pos++]^=e[o++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){(0,P.exists)(this,!1),(0,P.bytes)(e),this.finish();let n=this.state,{blockLen:r}=this;for(let s=0,o=e.length;s<o;){this.posOut>=r&&this.keccak();let i=Math.min(r-this.posOut,o-s);e.set(n.subarray(this.posOut,this.posOut+i),s),this.posOut+=i,s+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error(\"XOF is not possible for this instance\");return this.writeInto(e)}xof(e){return(0,P.number)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,P.output)(e,this),this.finished)throw new Error(\"digest() was already called\");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:n,suffix:r,outputLen:s,rounds:o,enableXOF:i}=this;return e||(e=new t(n,r,s,i,o)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=o,e.suffix=r,e.outputLen=s,e.enableXOF=i,e.destroyed=this.destroyed,e}};d.Keccak=_;var T=(t,e,n)=>(0,b.wrapConstructor)(()=>new _(e,t,n));d.sha3_224=T(6,144,224/8);d.sha3_256=T(6,136,256/8);d.sha3_384=T(6,104,384/8);d.sha3_512=T(6,72,512/8);d.keccak_224=T(1,144,224/8);d.keccak_256=T(1,136,256/8);d.keccak_384=T(1,104,384/8);d.keccak_512=T(1,72,512/8);var Qe=(t,e,n)=>(0,b.wrapXOFConstructorWithOpts)((r={})=>new _(e,t,r.dkLen===void 0?n:r.dkLen,!0));d.shake128=Qe(31,168,128/8);d.shake256=Qe(31,136,256/8)});var at=A((Bn,w)=>{\"use strict\";var{sha3_512:ln}=Ze(),tt=24,N=32,re=(t=4,e=Math.random)=>{let n=\"\";for(;n.length<t;)n=n+Math.floor(e()*36).toString(36);return n};function nt(t){let e=BigInt(8),n=BigInt(0);for(let r of t.values()){let s=BigInt(r);n=(n<<e)+s}return n}var rt=(t=\"\")=>nt(ln(t)).toString(36).slice(1),et=Array.from({length:26},(t,e)=>String.fromCharCode(e+97)),un=t=>et[Math.floor(t()*et.length)],st=({globalObj:t=typeof global<\"u\"?global:typeof window<\"u\"?window:{},random:e=Math.random}={})=>{let n=Object.keys(t).toString(),r=n.length?n+re(N,e):re(N,e);return rt(r).substring(0,N)},ot=t=>()=>t++,dn=476782367,it=({random:t=Math.random,counter:e=ot(Math.floor(t()*dn)),length:n=tt,fingerprint:r=st({random:t})}={})=>function(){let o=un(t),i=Date.now().toString(36),l=e().toString(36),f=re(n,t),h=`${i+f+l+r}`;return`${o+rt(h).substring(1,n)}`},hn=it(),fn=(t,{minLength:e=2,maxLength:n=N}={})=>{let r=t.length,s=/^[a-z][0-9a-z]+$/;try{if(typeof t==\"string\"&&r>=e&&r<=n&&s.test(t))return!0}finally{}return!1};w.exports.getConstants=()=>({defaultLength:tt,bigLength:N});w.exports.init=it;w.exports.createId=hn;w.exports.bufToBigInt=nt;w.exports.createCounter=ot;w.exports.createFingerprint=st;w.exports.isCuid=fn});var z=A((Un,D)=>{\"use strict\";var{createId:pn,init:mn,getConstants:gn,isCuid:yn}=at();D.exports.createId=pn;D.exports.init=mn;D.exports.getConstants=gn;D.exports.isCuid=yn});var Tt=Y(z(),1);var Sn={arabic:\"ar\",armenian:\"am\",bulgarian:\"bg\",danish:\"dk\",dutch:\"nl\",english:\"en\",finnish:\"fi\",french:\"fr\",german:\"de\",greek:\"gr\",hungarian:\"hu\",indian:\"in\",indonesian:\"id\",irish:\"ie\",italian:\"it\",lithuanian:\"lt\",nepali:\"np\",norwegian:\"no\",portuguese:\"pt\",romanian:\"ro\",russian:\"ru\",serbian:\"rs\",slovenian:\"ru\",spanish:\"es\",swedish:\"se\",tamil:\"ta\",turkish:\"tr\",ukrainian:\"uk\",sanskrit:\"sk\"};var se=Object.keys(Sn);var Fn=Date.now().toString().slice(5);var ct=BigInt(1e3),lt=BigInt(1e6),ut=BigInt(1e9);function dt(t){return typeof t==\"number\"&&(t=BigInt(t)),t<ct?`${t}ns`:t<lt?`${t/ct}\\u03BCs`:t<ut?`${t/lt}ms`:`${t/ut}s`}var Wn=\"intersection\"in new Set;var Vn=\"union\"in new Set;var bn=se.join(`\n - `),qn={NO_LANGUAGE_WITH_CUSTOM_TOKENIZER:\"Do not pass the language option to create when using a custom tokenizer.\",LANGUAGE_NOT_SUPPORTED:`Language \"%s\" is not supported.\nSupported languages are:\n - ${bn}`,INVALID_STEMMER_FUNCTION_TYPE:\"config.stemmer property must be a function.\",MISSING_STEMMER:'As of version 1.0.0 @orama/orama does not ship non English stemmers by default. To solve this, please explicitly import and specify the \"%s\" stemmer from the package @orama/stemmers. See https://docs.oramasearch.com/open-source/text-analysis/stemming for more information.',CUSTOM_STOP_WORDS_MUST_BE_FUNCTION_OR_ARRAY:\"Custom stop words array must only contain strings.\",UNSUPPORTED_COMPONENT:'Unsupported component \"%s\".',COMPONENT_MUST_BE_FUNCTION:'The component \"%s\" must be a function.',COMPONENT_MUST_BE_FUNCTION_OR_ARRAY_FUNCTIONS:'The component \"%s\" must be a function or an array of functions.',INVALID_SCHEMA_TYPE:'Unsupported schema type \"%s\" at \"%s\". Expected \"string\", \"boolean\" or \"number\" or array of them.',DOCUMENT_ID_MUST_BE_STRING:'Document id must be of type \"string\". Got \"%s\" instead.',DOCUMENT_ALREADY_EXISTS:'A document with id \"%s\" already exists.',DOCUMENT_DOES_NOT_EXIST:'A document with id \"%s\" does not exists.',MISSING_DOCUMENT_PROPERTY:'Missing searchable property \"%s\".',INVALID_DOCUMENT_PROPERTY:'Invalid document property \"%s\": expected \"%s\", got \"%s\"',UNKNOWN_INDEX:'Invalid property name \"%s\". Expected a wildcard string (\"*\") or array containing one of the following properties: %s',INVALID_BOOST_VALUE:\"Boost value must be a number greater than, or less than 0.\",INVALID_FILTER_OPERATION:\"You can only use one operation per filter, you requested %d.\",SCHEMA_VALIDATION_FAILURE:'Cannot insert document due schema validation failure on \"%s\" property.',INVALID_SORT_SCHEMA_TYPE:'Unsupported sort schema type \"%s\" at \"%s\". Expected \"string\" or \"number\".',CANNOT_SORT_BY_ARRAY:'Cannot configure sort for \"%s\" because it is an array (%s).',UNABLE_TO_SORT_ON_UNKNOWN_FIELD:'Unable to sort on unknown field \"%s\". Allowed fields: %s',SORT_DISABLED:\"Sort is disabled. Please read the documentation at https://docs.oramasearch for more information.\",UNKNOWN_GROUP_BY_PROPERTY:'Unknown groupBy property \"%s\".',INVALID_GROUP_BY_PROPERTY:'Invalid groupBy property \"%s\". Allowed types: \"%s\", but given \"%s\".',UNKNOWN_FILTER_PROPERTY:'Unknown filter property \"%s\".',INVALID_VECTOR_SIZE:'Vector size must be a number greater than 0. Got \"%s\" instead.',INVALID_VECTOR_VALUE:'Vector value must be a number greater than 0. Got \"%s\" instead.',INVALID_INPUT_VECTOR:`Property \"%s\" was declared as a %s-dimensional vector, but got a %s-dimensional vector instead.\nInput vectors must be of the size declared in the schema, as calculating similarity between vectors of different sizes can lead to unexpected results.`,WRONG_SEARCH_PROPERTY_TYPE:'Property \"%s\" is not searchable. Only \"string\" properties are searchable.',FACET_NOT_SUPPORTED:`Facet doens't support the type \"%s\".`,INVALID_DISTANCE_SUFFIX:'Invalid distance suffix \"%s\". Valid suffixes are: cm, m, km, mi, yd, ft.',INVALID_SEARCH_MODE:'Invalid search mode \"%s\". Valid modes are: \"fulltext\", \"vector\", \"hybrid\".',MISSING_VECTOR_AND_SECURE_PROXY:\"No vector was provided and no secure proxy was configured. Please provide a vector or configure an Orama Secure Proxy to perform hybrid search.\",MISSING_TERM:'\"term\" is a required parameter when performing hybrid search. Please provide a search term.',INVALID_VECTOR_INPUT:'Invalid \"vector\" property. Expected an object with \"value\" and \"property\" properties, but got \"%s\" instead.',PLUGIN_CRASHED:\"A plugin crashed during initialization. Please check the error message for more information:\",PLUGIN_SECURE_PROXY_NOT_FOUND:`Could not find '@orama/secure-proxy-plugin' installed in your Orama instance.\nPlease install it before proceeding with creating an answer session.\nRead more at https://docs.orama.com/open-source/plugins/plugin-secure-proxy\n`,PLUGIN_SECURE_PROXY_MISSING_CHAT_MODEL:`Could not find a chat model defined in the secure proxy plugin configuration.\nPlease provide a chat model before proceeding with creating an answer session.\nRead more at https://docs.orama.com/open-source/plugins/plugin-secure-proxy\n`,ANSWER_SESSION_LAST_MESSAGE_IS_NOT_ASSISTANT:\"The last message in the session is not an assistant message. Cannot regenerate non-assistant messages.\",PLUGIN_COMPONENT_CONFLICT:'The component \"%s\" is already defined. The plugin \"%s\" is trying to redefine it.'};function oe(t){return{raw:Number(t),formatted:dt(t)}}var On=\"[^aeiou]\",ft=\"[aeiouy]\",x=On+\"[^aeiouy]*\",L=ft+\"[aeiou]*\",Fr=\"^(\"+x+\")?\"+L+x,Wr=\"^(\"+x+\")?\"+L+x+\"(\"+L+\")?$\",Vr=\"^(\"+x+\")?\"+L+x+L+x,$r=\"^(\"+x+\")?\"+ft;var mt=\"2.1.4\";var gt={name:\"@oramacloud/client\",version:mt,description:\"Orama SDK client for Node.js, Deno, and Browsers\",type:\"module\",sideEffects:!1,main:\"./dist/index.js\",module:\"./dist/index.js\",types:\"./dist/index.d.ts\",runkitExampleFilename:\"./example/runkit.js\",exports:{types:\"./dist/index.d.ts\",browser:{import:\"./dist/index.js\",require:\"./dist/index.global.js\"},import:\"./dist/index.js\",require:\"./dist/index.cjs\",default:\"./dist/index.js\"},scripts:{watch:\"tsup --config tsup.lib.js --watch src\",build:\"tsup --config tsup.lib.js\",test:'glob -c \"node --import tsx --no-warnings --test\" \"./tests/**/*.test.ts\"',\"serve:example\":\"esbuild src/index.ts --bundle --outfile=example/out.js --format=esm --watch --servedir=example\"},keywords:[\"orama\",\"search engine\",\"sdk\"],files:[\"dist\",\"example/runkit.js\"],author:{name:\"Michele Riva\",email:\"michele.riva@oramasearch.com\",url:\"https://github.com/MicheleRiva\"},license:\"ISC\",dependencies:{\"@orama/cuid2\":\"^2.2.3\",\"@orama/orama\":\"^3.0.0\",lodash:\"^4.17.21\"},devDependencies:{\"@fastify/formbody\":\"^7.4.0\",\"@types/lodash\":\"^4.14.202\",\"@types/node\":\"^20.3.1\",dotenv:\"^16.3.1\",esbuild:\"0.18.5\",fastify:\"^4.19.2\",glob:\"^11.0.0\",husky:\"^8.0.3\",\"npm-run-all\":\"^4.1.5\",\"ts-standard\":\"^12.0.2\",tsup:\"^8.3.0\",tsx:\"^4.7.0\",typescript:\"^5.1.3\"},publishConfig:{access:\"public\"},\"ts-standard\":{ignore:[\"dist\",\"node_modules\"]}};var ce=Y(z(),1);var yt=\"https://answer.api.orama.com\",St=\"/v1/indexes\",ie=\"orama_user_id\";function bt(t){let[e,...n]=t.split(`\n`),r=n.join(`\n`).replace(\"data: \",\"\");return{event:e.replace(\"event: \",\"\"),data:r}}function ae(t){return typeof t==\"object\"?JSON.stringify(t):`${t}`}var H=class{messages;inferenceType;oramaClient;endpoint;abortController;events;userContext;conversationID;lastInteractionParams;state=[];systemPrompts;constructor(e){let n=e.oramaClient.answersApiBaseURL||yt;this.messages=e.initialMessages||[],this.inferenceType=e.inferenceType,this.oramaClient=e.oramaClient,this.endpoint=`${n}/v1/answer?api-key=${this.oramaClient.api_key}`,this.events=e.events,this.conversationID=(0,ce.createId)(),this.userContext=e.userContext}async askStream(e){return this.messages.push({role:\"user\",content:e.term??\"\"}),this.fetchAnswer(e)}async ask(e){let n=await this.askStream(e),r=\"\";for await(let s of n)r=s;return this.events?.onMessageChange&&this.events.onMessageChange(this.messages),r}getMessages(){return this.messages}clearSession(){this.messages=[],this.state=[],this.events?.onMessageChange&&this.events.onMessageChange(this.messages),this.events?.onStateChange&&this.events.onStateChange(this.state)}abortAnswer(){if(!this.abortController)throw new Error(\"AbortController is not ready\");this.abortController.abort(),this.abortController=void 0,this.state[this.state.length-1].aborted=!0}async regenerateLast({stream:e=!0}={}){if(this.state.length===0||this.messages.length===0)throw new Error(\"No messages to regenerate\");if(!(this.messages.at(-1)?.role===\"assistant\"))throw new Error(\"Last message is not an assistant message\");return this.messages.pop(),this.state.pop(),e?this.askStream(this.lastInteractionParams):this.ask(this.lastInteractionParams)}addNewEmptyAssistantMessage(){this.messages.push({role:\"assistant\",content:\"\"})}async*fetchAnswer(e){this.abortController=new AbortController,this.lastInteractionParams=e;let n=(0,ce.createId)(),r=null,s=this.state.length;this.state.push({interactionId:n,query:e.term??\"\",response:\"\",relatedQueries:null,sources:null,translatedQuery:null,segment:null,trigger:null,aborted:!1,loading:!0,error:!1,errorMessage:null});try{this.events?.onNewInteractionStarted&&this.events.onNewInteractionStarted(n),this.events?.onStateChange&&this.events.onStateChange(this.state);let o=new URLSearchParams;o.append(\"type\",this.inferenceType),o.append(\"messages\",JSON.stringify(this.messages)),o.append(\"query\",e.term??\"\"),o.append(\"conversationId\",this.conversationID),o.append(\"userId\",this.oramaClient.getUserId()),o.append(\"endpoint\",this.oramaClient.endpoint),o.append(\"searchParams\",JSON.stringify(e)),o.append(\"identity\",this.oramaClient.getIdentity()??\"\"),o.append(\"interactionId\",n),o.append(\"alias\",this.oramaClient.getAlias()??\"\");let i=this.getSystemPromptConfiguration();if(i&&o.append(\"systemPrompts\",JSON.stringify(i)),this.userContext&&o.append(\"userContext\",ae(this.userContext)),e.userData&&o.append(\"userData\",ae(e.userData)),e.related){if(e.related?.howMany&&e.related?.howMany>5)throw new Error(\"Can generate at most 5 related queries\");o.append(\"related\",JSON.stringify({enabled:!0,howMany:e.related.howMany??3,format:e.related.format??\"question\"}))}let l=await fetch(this.endpoint,{method:\"POST\",headers:{\"Content-Type\":\"application/x-www-form-urlencoded\"},body:o.toString(),signal:this.abortController.signal});if(!l.ok||!l.body)throw new Error(l.statusText);r=l.body.getReader();let f=new TextDecoder,h=[],u=\"\";this.events?.onMessageLoading&&this.events.onMessageLoading(!0),this.addNewEmptyAssistantMessage();let p=this.messages.at(-1);for(;;){let{value:m,done:I}=await r.read();if(I)break;u+=f.decode(m,{stream:!0});let q;for(;(q=u.indexOf(`\n\n`))!==-1;){let de=u.slice(0,q);u=u.slice(q+2);try{let G=bt(de),g=JSON.parse(G.data);if(g.type===\"sources\")this.state[s].sources=g.message,this.events?.onSourceChange&&this.events.onSourceChange(g.message),this.events?.onStateChange&&this.events.onStateChange(this.state);else if(g.type===\"query-translated\")this.state[s].translatedQuery=g.message,this.events?.onQueryTranslated&&this.events.onQueryTranslated(g.message),this.events?.onStateChange&&this.events.onStateChange(this.state);else if(g.type===\"conversation-metadata\"){let{segment:he,trigger:fe}=g.message;he&&(this.state[s].segment=he),fe&&(this.state[s].trigger=fe),this.events?.onStateChange&&this.events.onStateChange(this.state)}else if(g.type===\"related-queries\")this.state[s].relatedQueries=g.message,this.events?.onRelatedQueries&&this.events.onRelatedQueries(g.message),this.events?.onStateChange&&this.events.onStateChange(this.state);else if(g.type===\"text\")for(h.push(g.message);h.length>0;)p.content+=h.shift(),this.state[s].response=p.content,this.events?.onStateChange&&this.events.onStateChange(this.state),this.events?.onMessageChange&&this.events.onMessageChange(this.messages),yield p.content}catch(G){console.error(\"Error parsing SSE event:\",G),console.error(\"Raw message:\",de)}}}}catch(o){if(o.name===\"AbortError\")this.state[s].aborted=!0,this.events?.onAnswerAborted&&this.events.onAnswerAborted(!0);else throw this.state[s].error=!0,this.state[s].errorMessage=o.message??\"Unknown error\",o}finally{r?.releaseLock(),this.state[s].loading=!1,this.events?.onStateChange&&this.events.onStateChange(this.state),this.events?.onInteractionDone&&this.events.onInteractionDone(this.state[s]),this.events?.onMessageLoading&&this.events.onMessageLoading(!1)}}setSystemPromptConfiguration(e){if(Array.isArray(e.systemPrompts)){if(!e.systemPrompts.every(n=>typeof n==\"string\"))throw new Error(\"Invalid system prompt configuration\");this.systemPrompts=e.systemPrompts}return this}getSystemPromptConfiguration(){return this.systemPrompts}};var F=class{cache;config;constructor(e){this.cache=new Map,this.config=e}set(e,n){this.cache.set(e,n)}get(e){return this.cache.get(e)}has(e){return this.cache.has(e)}delete(e){return this.cache.delete(e)}clear(){this.cache.clear()}size(){return this.cache.size}};function O(t,e){if(typeof navigator<\"u\"){typeof navigator.sendBeacon<\"u\"&&navigator.sendBeacon(t,e);return}fetch(t,{method:\"POST\",body:e,headers:{\"Content-Type\":\"application/json\"}}).then(()=>{},n=>console.log(n))}var W=class t{data;params;config;profile;constructor(e,n){this.data=[],this.config=e,this.profile=n}setParams(e){this.params=e}static create(e,n){let r=new t(e,n);return r.start(),r}add(e){this.data.push({rawSearchString:e.rawSearchString,query:e.query,resultsCount:e.resultsCount,roundTripTime:e.roundTripTime,searchedAt:e.searchedAt,userId:this.profile.getUserId(),identity:this.profile.getIdentity(),alias:this.profile.getAlias(),referer:typeof location<\"u\"?location.toString():void 0}),this.params!=null&&this.data.length>=this.config.flushSize&&this.flush()}flush(){if(this.params==null||this.data.length===0)return;let e=this.data;this.data=[];let n={source:\"fe\",deploymentID:this.params.deploymentID,index:this.params.index,oramaId:this.config.id,oramaVersion:gt.version,userAgent:typeof navigator<\"u\"?navigator.userAgent:void 0,events:e};O(`${this.params.endpoint}?api-key=${this.config.api_key}`,JSON.stringify(n))?.catch(r=>console.log(r))}start(){let e=setInterval(this.flush.bind(this),this.config.flushInterval);e.unref!=null&&e.unref()}};var V=class{constructor(e){this.params=e}intervalId;start(){this.stop(),this.intervalId=setInterval(this.beat.bind(this),this.params.frequency)}stop(){this.intervalId!==void 0&&clearInterval(this.intervalId)}beat(){O(this.params.endpoint)?.catch(e=>console.log(e))}};var $=Y(z(),1);var j=class{endpoint;apiKey;userId;identity;userAlias;params;constructor({endpoint:e,apiKey:n}){if(!e||!n)throw new Error(\"Endpoint and API Key are required to create a Profile\");if(typeof e!=\"string\"||typeof n!=\"string\")throw new Error(\"Endpoint and API Key must be strings\");if(typeof localStorage<\"u\"){let r=localStorage.getItem(ie);r?this.userId=r:(this.userId=(0,$.createId)(),localStorage.setItem(ie,this.userId))}else this.userId=(0,$.createId)();this.endpoint=e,this.apiKey=n}setParams(e){let{protocol:n,host:r}=new URL(e.identifyUrl),s=`${n}//${r}/identify`;this.params={identifyUrl:s,index:e.index}}getIdentity(){return this.identity}getUserId(){return this.userId}getAlias(){return this.userAlias}async sendProfileData(e){if(!this.params)throw new Error(\"Orama Profile is not initialized\");let n=JSON.stringify({...e,visitorId:this.getUserId(),index:this.params.index});await O(`${this.params?.identifyUrl}?api-key=${this.apiKey}`,n)}async identify(e,n){if(typeof n!=\"string\")throw new Error(\"Identity must be a string\");await e,await this.sendProfileData({entity:\"identity\",id:n}),this.identity=n}async alias(e,n){if(typeof n!=\"string\")throw new Error(\"Identity must be a string\");await e,await this.sendProfileData({entity:\"alias\",id:n}),this.userAlias=n}reset(){this.userId=(0,$.createId)(),this.identity=void 0,this.userAlias=void 0}};function vn(t){return t!==void 0&&t?.signal!==void 0}var It=class{id=(0,Tt.createId)();api_key;endpoint;multiIndexSearch;mergeResults;multiIndexIndexes;answersApiBaseURL;collector;cache;profile;searchDebounceTimer;searchRequestCounter=0;blockSearchTillAuth=!1;heartbeat;initPromise;constructor(e){if(\"indexes\"in e){this.api_key=e.indexes[0].api_key,this.multiIndexIndexes=e.indexes;let n=new URL(e.indexes[0].endpoint).origin;if(e.indexes.some(r=>new URL(r.endpoint).origin!==n))throw new Error(\"All indexes must have the same endpoint origin\");this.endpoint=n+St,this.multiIndexSearch=!0,this.mergeResults=e.mergeResults??!0}else this.api_key=e.api_key,this.endpoint=e.endpoint,this.multiIndexSearch=!1,this.mergeResults=!0;if(this.answersApiBaseURL=e.answersApiBaseURL,this.profile=new j({endpoint:this.endpoint,apiKey:this.api_key}),e.telemetry!==!1){let n={id:this.id,api_key:this.api_key,flushInterval:e.telemetry?.flushInterval??5e3,flushSize:e.telemetry?.flushSize??25};this.collector=W.create(n,this.profile)}if(e.cache!==!1){let n={};this.cache=new F(n)}this.init()}customerUserToken=void 0;searchToken=void 0;setAuthToken(e){e===null?(this.customerUserToken=void 0,this.searchToken=void 0):(this.customerUserToken=e,this.searchToken=void 0),this.init()}onAuthTokenExpired;setOnAuthTokenExpired(e){this.onAuthTokenExpired=e}addSearchResultsToCollector(e,n,r,s){if(this.collector)if(Array.isArray(e))for(let o of e)this.collector.add({rawSearchString:r.term,resultsCount:o.hits?.length??0,roundTripTime:n,query:r,cached:s,searchedAt:new Date,userId:this.profile.getUserId()});else this.collector.add({rawSearchString:r.term,resultsCount:e?.hits?.length??0,roundTripTime:n,query:r,cached:s,searchedAt:new Date,userId:this.profile.getUserId()})}async search(e,n){if(await this.initPromise,this.blockSearchTillAuth)return console.warn(\"Search request blocked until user is authenticated\"),null;let r=++this.searchRequestCounter,s=`search-${JSON.stringify(e)}`,o=null,i,l=!1,f=n?.fresh!==!0&&this.cache?.has(s),h=async()=>{try{let u=Date.now();this.multiIndexSearch?o=await this.fetch(\"multi_search\",\"POST\",{q:{...e,mergeResults:this.mergeResults},sst:this.searchToken,indexes:this.multiIndexIndexes},n?.abortController):o=await this.fetch(\"search\",\"POST\",{q:e,sst:this.searchToken},n?.abortController);let p=Date.now();i=p-u;let m=await oe(BigInt(p*1e6-u*1e6));if(!Array.isArray(o))o.elapsed=m;else for(let I of o)I.elapsed=m;this.cache?.set(s,o)}catch(u){if(u.name!==\"AbortError\")throw console.error(\"Search request failed\",u),u}return this.addSearchResultsToCollector(o,i,e,l),o};if(f&&this.cache)i=0,o=this.cache.get(s),l=!0,this.addSearchResultsToCollector(o,i,e,l);else return n?.debounce?new Promise((u,p)=>{clearTimeout(this.searchDebounceTimer),this.searchDebounceTimer=setTimeout(async()=>{try{await h(),u(o)}catch(m){m.name!==\"AbortError\"&&(console.error(\"Search request failed\",m),p(m))}},n?.debounce||300),\"unref\"in this.searchDebounceTimer&&this.searchDebounceTimer.unref()}):h();return r===this.searchRequestCounter?o:null}async vectorSearch(e,n){await this.initPromise;let r=`vectorSearch-${JSON.stringify(e)}`,s,o,i=!1;if((n?.fresh!==!0&&this.cache?.has(r))===!0&&this.cache!=null)s=0,o=this.cache.get(r),i=!0;else{let f=Date.now();o=await this.fetch(\"vector-search2\",\"POST\",{q:e},n?.abortSignal??n?.abortController);let h=Date.now();o.elapsed=await oe(BigInt(h*1e6-f*1e6)),s=h-f,this.cache?.set(r,o)}return this.collector!=null&&this.collector.add({rawSearchString:e.term,resultsCount:o.hits?.length??0,roundTripTime:s,query:e,cached:i,searchedAt:new Date,userId:this.profile.getUserId()}),o}createAnswerSession(e){return new H({inferenceType:e?.inferenceType||\"documentation\",initialMessages:e?.initialMessages||[],oramaClient:this,events:e?.events,userContext:e?.userContext,systemPrompts:e?.systemPrompts??[]})}startHeartBeat(e){this.heartbeat?.stop(),this.heartbeat=new V({...e,endpoint:`${this.endpoint}/health?api-key=${this.api_key}`}),this.heartbeat.start()}stopHeartBeat(){this.heartbeat?.stop()}async getPop(){return(await this.initPromise)?.pop??\"\"}expirationTimer;init(){let e=[\"init\",\"GET\",void 0,void 0,{token:this.customerUserToken}];this.multiIndexSearch&&(e=[\"init_multi_search\",\"POST\",{indexes:this.multiIndexIndexes},void 0,{token:this.customerUserToken}]),this.initPromise=this.fetch(...e).then(n=>{if(this.collector?.setParams({endpoint:n.collectUrl,deploymentID:n.deploymentID,index:n.index}),this.profile?.setParams({identifyUrl:n.collectUrl,index:n.index}),n.searchSession){if(\"required\"in n.searchSession&&n.searchSession.required===!0)this.blockSearchTillAuth=!0;else if(\"token\"in n.searchSession){let r=n.searchSession.token;this.searchToken=r;let s=n.searchSession.maxAge;this.blockSearchTillAuth=!1,this.expirationTimer&&clearTimeout(this.expirationTimer),this.expirationTimer=setTimeout(()=>{this.searchToken===r&&(this.searchToken=void 0,this.blockSearchTillAuth=!0,this.onAuthTokenExpired?.(r))},s*1e3),\"unref\"in this.expirationTimer&&this.expirationTimer.unref()}}return n}).catch(n=>(console.log(n),null))}async fetch(e,n,r,s,o){let i=vn(s)?s?.signal:s;if(i?.aborted===!0)throw new Error(\"Request aborted\");let l={method:n,headers:{\"Content-Type\":\"application/x-www-form-urlencoded\"},signal:i};if(n===\"POST\"&&r!==void 0){let u=r;u.version=mt,u.id=this.id,u.visitorId=this.profile.getUserId(),l.body=Object.entries(u).filter(([p,m])=>!!m).map(([p,m])=>`${p}=${encodeURIComponent(JSON.stringify(m))}`).join(\"&\")}let f=new URL(`${this.endpoint}/${e}`);if(this.multiIndexSearch||f.searchParams.append(\"api-key\",this.api_key),o)for(let[u,p]of Object.entries(o))p&&f.searchParams.append(u,p);let h=await fetch(f,l);if(!h.ok){let u=new Error;throw u.httpResponse=h,u}return await h.json()}getIdentity(){return this.profile.getIdentity()}getUserId(){return this.profile.getUserId()}getAlias(){return this.profile.getAlias()}async identify(e){if(this.initPromise===void 0)throw new Error(\"OramaClient not initialized\");await this.profile.identify(this.initPromise,e)}async alias(e){if(this.initPromise===void 0)throw new Error(\"OramaClient not initialized\");await this.profile.alias(this.initPromise,e)}reset(){this.profile.reset()}};var ue=\"snapshot\",J=\"notify\",wt=\"deploy\",xt=\"has-data\",At=\"update-schema\";var Cn=\"https://api.askorama.ai\",Ot=`${Cn}/api/v1`;var K=class{manager;indexId=null;constructor(e){this.manager=e.manager,this.indexId=e.indexID,this.manager.setIndexID(e.indexID)}async empty(){return(await this.callIndexWebhook(ue,[])).success}async snapshot(e){return(await this.callIndexWebhook(ue,e)).success}async insert(e){return(await this.callIndexWebhook(J,{upsert:e})).success}async update(e){return(await this.callIndexWebhook(J,{upsert:e})).success}async delete(e){try{await this.callIndexWebhook(J,{remove:e})}catch(n){return console.error(n),!1}return!0}async updateSchema(e){try{await this.callIndexWebhook(At,e)}catch(n){return console.error(n),!1}return!0}async deploy(){try{let e=await this.callIndexWebhook(wt)}catch(e){return console.error(e),!1}return!0}async hasPendingOperations(){return(await this.callIndexWebhook(xt)).hasData}checkIndexID(){if(!this.indexId)throw new Error(\"Index ID is not set\")}callIndexWebhook(e,n){return this.checkIndexID(),this.manager.callIndexWebhook(e,n)}};var Et=class{indexId=null;apiKey;baseURL;constructor(e){this.apiKey=e.api_key,this.baseURL=e?.baseURL||Ot}index(e){return new K({manager:this,indexID:e})}setIndexID(e){this.indexId=e}async callIndexWebhook(e,n){let r={method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`}};return n&&(r.body=JSON.stringify(n)),(await fetch(`${this.baseURL}/webhooks/${this.indexId}/${e}`,r)).json()}};export{H as AnswerSession,Et as CloudManager,It as OramaClient};\n/*! Bundled license information:\n\n@noble/hashes/utils.js:\n  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)\n*/\n//# sourceMappingURL=index.js.map", "import type { CloudIndexConfig } from '@/types'\nimport type { AnyOrama, Orama } from '@orama/orama'\nimport { Switch } from '@orama/switch'\nimport { OramaClient } from '@oramacloud/client'\n\n/**\n * Arrow keys navigation for focusable elements within a container\n *\n * @param ref HTMLElement - The element that contains the focusable elements\n * @param event KeyboardEvent - The event that triggered the navigation\n * @param selector string - The selector for the focusable elements (default: '[focus-on-arrow-nav]')\n * @returns void\n */\nexport function arrowKeysNavigation(ref: HTMLElement, event: KeyboardEvent, selector = '[focus-on-arrow-nav]') {\n  if (event.key !== 'ArrowDown' && event.key !== 'ArrowUp') return\n\n  event.stopPropagation()\n  event.preventDefault()\n\n  const focusableElements = ref.querySelectorAll(selector)\n\n  let focusableArray = Array.from(focusableElements) as HTMLElement[]\n  focusableArray = focusableArray.filter((element) => element.tabIndex !== -1)\n\n  const firstFocusableElement = focusableArray[0]\n  const lastFocusableElement = focusableArray[focusableArray.length - 1]\n\n  const focusedElement = ref.querySelector(':focus') as HTMLElement\n  const focusedIndex = focusableArray.indexOf(focusedElement)\n\n  let nextFocusableElement: HTMLElement\n\n  if (event.key === 'ArrowDown') {\n    nextFocusableElement =\n      focusedIndex === focusableArray.length - 1 ? firstFocusableElement : focusableArray[focusedIndex + 1]\n    nextFocusableElement?.focus()\n  } else if (event.key === 'ArrowUp') {\n    nextFocusableElement = focusedIndex === 0 ? lastFocusableElement : focusableArray[focusedIndex - 1]\n    nextFocusableElement?.focus()\n  }\n}\n\nexport function format(first: string, middle: string, last: string): string {\n  return (first || '') + (middle ? ` ${middle}` : '') + (last ? ` ${last}` : '')\n}\n\nexport function copyToClipboard(text) {\n  // Check if the Clipboard API is supported\n  if (navigator.clipboard?.writeText) {\n    navigator.clipboard.writeText(text).catch((err) => {\n      console.error('Could not copy text: ', err)\n    })\n  } else {\n    // Fallback for browsers that do not support the Clipboard API\n    const textarea = document.createElement('textarea')\n    textarea.value = text\n    textarea.setAttribute('readonly', '')\n    textarea.style.position = 'absolute'\n    textarea.style.left = '-9999px'\n    document.body.appendChild(textarea)\n    textarea.select()\n    document.execCommand('copy')\n    document.body.removeChild(textarea)\n  }\n}\n\nexport function getNonExplicitAttributes(element: HTMLElement, explicitProps: string[]): { [key: string]: string } {\n  const allAttributes = Array.from(element.attributes)\n  return allAttributes.reduce((acc, attr) => {\n    if (!explicitProps.includes(attr.name)) {\n      acc[attr.name] = attr.value\n    }\n    return acc\n  }, {})\n}\n\nexport function validateCloudIndexConfig(\n  el: HTMLElement,\n  index?: CloudIndexConfig,\n  instance?: OramaClient | AnyOrama,\n): void {\n  const componentDetails = `\n    Component: ${el.tagName.toLowerCase()}\n    Id: ${el.id}\n  `\n\n  if (!index && !instance) {\n    throw new Error(\n      `Invalid component configuration. Please provide a valid index or instance prop. ${componentDetails}`,\n    )\n  }\n\n  if (instance && !index) {\n    const oramaInstance = new Switch(instance)\n\n    // TODO: maybe add a validate method to the client?\n    oramaInstance\n      .search({\n        term: 'test',\n      })\n      .catch(() => {\n        throw new Error(\n          `Invalid cloud instance configuration. Please provide a valid api_key and endpoint ${componentDetails}`,\n        )\n      })\n  }\n\n  if (index && !instance) {\n    if (!index.api_key || !index.endpoint) {\n      throw new Error(\n        `Invalid cloud index configuration. Please provide a valid api_key and endpoint ${componentDetails}`,\n      )\n    }\n    return\n  }\n\n  if (index && instance) {\n    console.warn(`Both index and instance props are provided. Instance prop will be used. ${componentDetails}`)\n  }\n}\n\nexport function initOramaClient(index: CloudIndexConfig): OramaClient | null {\n  return new OramaClient({\n    api_key: index.api_key,\n    endpoint: index.endpoint,\n  })\n}\n\nexport function generateRandomID(componentName: string): string {\n  const prefix = `orama-ui-${componentName}`\n  return `${prefix}-${Math.random().toString(36).substring(2, 15)}`\n}\n"],
  "mappings": "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",
  "names": ["count", "j", "msg", "self", "plugin", "OSSAnswerSession", "t", "_a", "OramaClient"]
}
