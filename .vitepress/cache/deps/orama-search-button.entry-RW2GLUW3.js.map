{
  "version": 3,
  "sources": ["../../../node_modules/@orama/wc-components/dist/esm/src/components/orama-search-button/orama-search-button.scss?tag=orama-search-button&encapsulation=shadow", "../../../node_modules/@orama/wc-components/dist/esm/src/components/orama-search-button/orama-search-button.tsx"],
  "sourcesContent": [":host {\n  display: block;\n}\n\n.kyb-shortcut {\n  background-color: var(--background-color-tertiary, background-color('tertiary'));\n  border-radius: var(--radius-s, $radius-s);\n  padding: var(--spacing-xs, $spacing-xs) var(--spacing-s, $spacing-xs);\n}\n", "import { Component, Watch, Prop, h, State, Element, Listen, Host } from '@stencil/core'\nimport type { ColorScheme } from '@/types'\nimport '@phosphor-icons/webcomponents/dist/icons/PhMagnifyingGlass.mjs'\nimport type { TThemeOverrides } from '@/components'\nimport { generateRandomID } from '@/utils/utils'\nimport { globalContext } from '@/context/GlobalContext'\n\nexport type ButtonClick = {\n  id: HTMLElement\n  searchboxId: string\n}\n\n@Component({\n  tag: 'orama-search-button',\n  styleUrl: 'orama-search-button.scss',\n  shadow: true,\n})\nexport class OramaSearchButton {\n  @Element() htmlElement!: HTMLElement\n\n  @Prop() size: 'small' | 'medium' | 'large' = 'medium'\n  @Prop() themeConfig?: Partial<TThemeOverrides>\n  @Prop() colorScheme?: ColorScheme = 'light'\n\n  @State() systemScheme: Omit<ColorScheme, 'system'> = 'light'\n  @State() shortcutLabel = ''\n  @State() componentID = generateRandomID('search-button')\n\n  schemaQuery!: MediaQueryList\n\n  @Watch('themeConfig')\n  @Watch('colorScheme')\n  watchHandler() {\n    this.updateTheme()\n  }\n\n  buttonRef!: HTMLElement\n\n  @Listen('searchboxClosed', { target: 'body' })\n  handleSearchboxClosed(event: CustomEvent<ButtonClick>) {\n    // TODO: should be based on the id of current searchbox\n    this.buttonRef.querySelector('button').focus()\n  }\n\n  // trigger click when entering  '⌘ K' o Mac or 'Ctrl + K'\n  @Listen('keydown', { target: 'document' })\n  handleKeyDown(event: KeyboardEvent) {\n    if (event.key === 'k' && (event.metaKey || event.ctrlKey)) {\n      event.preventDefault()\n      this.buttonRef.click()\n    }\n  }\n\n  updateTheme() {\n    const scheme = this.colorScheme === 'system' ? this.systemScheme : this.colorScheme\n    const uiElement = this.htmlElement\n\n    if (uiElement && scheme) {\n      uiElement.classList.remove('theme-light', 'theme-dark')\n      uiElement.classList.add(`theme-${scheme}`)\n    }\n\n    this.updateCssVariables(scheme as ColorScheme)\n  }\n\n  updateCssVariables(scheme: ColorScheme) {\n    const config = this.themeConfig\n    const root = this.htmlElement\n\n    if (root && config && scheme) {\n      if (config.colors?.[scheme]) {\n        for (const key of Object.keys(config.colors[scheme])) {\n          root.style.setProperty(`${key}`, config.colors[scheme][key])\n        }\n      }\n      if (config.typography) {\n        for (const key of Object.keys(config.typography)) {\n          root.style.setProperty(`${key}`, config.typography[key])\n        }\n      }\n    }\n  }\n\n  private handleShortcutLabel() {\n    const userAgent = navigator.userAgent\n    const isMac = userAgent.includes('Mac')\n\n    return isMac ? '⌘ K' : 'Ctrl + K'\n  }\n\n  private onPrefersColorSchemeChange = (event) => {\n    this.systemScheme = event.matches ? 'dark' : 'light'\n    this.updateTheme()\n  }\n  connectedCallback() {\n    this.htmlElement.id = this.componentID\n    this.shortcutLabel = this.handleShortcutLabel()\n\n    this.schemaQuery = window.matchMedia('(prefers-color-scheme: dark)')\n    this.systemScheme = this.schemaQuery.matches ? 'dark' : 'light'\n    this.updateTheme()\n\n    this.schemaQuery.addEventListener('change', this.onPrefersColorSchemeChange)\n  }\n\n  disconnectedCallback() {\n    this.schemaQuery.removeEventListener('change', this.onPrefersColorSchemeChange)\n  }\n\n  render() {\n    return (\n      <Host>\n        {/* biome-ignore lint/a11y/useKeyWithClickEvents: <explanation> */}\n        <orama-button\n          type=\"button\"\n          variant=\"secondary\"\n          ref={(el) => (this.buttonRef = el)}\n          size={this.size}\n          onClick={() => {\n            globalContext.open = true\n          }}\n        >\n          <span slot=\"adorment-start\">\n            <ph-magnifying-glass />\n          </span>\n          <slot />\n          <span slot=\"adorment-end\" class=\"kyb-shortcut\">\n            {this.shortcutLabel}\n          </span>\n        </orama-button>\n      </Host>\n    )\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA,IAAM,uBAAuB;AAC7B,IAAA,0BAAe;ICgBF,oBAAiB,MAAA;;;AAyEpB,SAAA,6BAA6B,CAAC,UAAK;AACzC,WAAK,eAAe,MAAM,UAAU,SAAS;AAC7C,WAAK,YAAW;;gBAxE2B;;uBAET;wBAEiB;yBAC5B;uBACF,iBAAiB,eAAe;;EAMvD,eAAY;AACV,SAAK,YAAW;;EAMlB,sBAAsB,OAA+B;AAEnD,SAAK,UAAU,cAAc,QAAQ,EAAE,MAAK;;;EAK9C,cAAc,OAAoB;AAChC,QAAI,MAAM,QAAQ,QAAQ,MAAM,WAAW,MAAM,UAAU;AACzD,YAAM,eAAc;AACpB,WAAK,UAAU,MAAK;;;EAIxB,cAAW;AACT,UAAM,SAAS,KAAK,gBAAgB,WAAW,KAAK,eAAe,KAAK;AACxE,UAAM,YAAY,KAAK;AAEvB,QAAI,aAAa,QAAQ;AACvB,gBAAU,UAAU,OAAO,eAAe,YAAY;AACtD,gBAAU,UAAU,IAAI,SAAS,MAAM,EAAE;;AAG3C,SAAK,mBAAmB,MAAqB;;EAG/C,mBAAmB,QAAmB;;AACpC,UAAM,SAAS,KAAK;AACpB,UAAM,OAAO,KAAK;AAElB,QAAI,QAAQ,UAAU,QAAQ;AAC5B,WAAI,KAAA,OAAO,YAAM,QAAA,OAAA,SAAA,SAAA,GAAG,MAAM,GAAG;AAC3B,mBAAW,OAAO,OAAO,KAAK,OAAO,OAAO,MAAM,CAAC,GAAG;AACpD,eAAK,MAAM,YAAY,GAAG,GAAG,IAAI,OAAO,OAAO,MAAM,EAAE,GAAG,CAAC;;;AAG/D,UAAI,OAAO,YAAY;AACrB,mBAAW,OAAO,OAAO,KAAK,OAAO,UAAU,GAAG;AAChD,eAAK,MAAM,YAAY,GAAG,GAAG,IAAI,OAAO,WAAW,GAAG,CAAC;;;;;EAMvD,sBAAmB;AACzB,UAAM,YAAY,UAAU;AAC5B,UAAM,QAAQ,UAAU,SAAS,KAAK;AAEtC,WAAO,QAAQ,QAAQ;;EAOzB,oBAAiB;AACf,SAAK,YAAY,KAAK,KAAK;AAC3B,SAAK,gBAAgB,KAAK,oBAAmB;AAE7C,SAAK,cAAc,OAAO,WAAW,8BAA8B;AACnE,SAAK,eAAe,KAAK,YAAY,UAAU,SAAS;AACxD,SAAK,YAAW;AAEhB,SAAK,YAAY,iBAAiB,UAAU,KAAK,0BAA0B;;EAG7E,uBAAoB;AAClB,SAAK,YAAY,oBAAoB,UAAU,KAAK,0BAA0B;;EAGhF,SAAM;AACJ,WACE,EAAC,MAAI,EAAA,KAAA,2CAAA,GAEH,EAAA,gBAAA,EAAA,KAAA,4CACE,MAAK,UACL,SAAQ,aACR,KAAK,CAAC,OAAQ,KAAK,YAAY,IAC/B,MAAM,KAAK,MACX,SAAS,MAAA;AACP,oBAAc,OAAO;MACtB,GAED,EAAA,QAAA,EAAA,KAAA,4CAAM,MAAK,iBAAgB,GACzB,EAAA,uBAAA,EAAA,KAAA,2CAAA,CAAA,CAAuB,GAEzB,EAAA,QAAA,EAAA,KAAA,2CAAA,CAAA,GACA,EAAA,QAAA,EAAA,KAAA,4CAAM,MAAK,gBAAe,OAAM,eAAc,GAC3C,KAAK,aAAa,CACd,CACM;;;;;;;;;;;;;",
  "names": []
}
